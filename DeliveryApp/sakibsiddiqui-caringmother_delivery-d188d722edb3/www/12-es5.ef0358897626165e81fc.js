function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var o=0;o<r.length;o++){var e=r[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function _createClass(t,r,o){return r&&_defineProperties(t.prototype,r),o&&_defineProperties(t,o),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{RdcS:function(t,r,o){"use strict";o.r(r),o.d(r,"ForgotpassordPageModule",(function(){return F}));var e=o("ofXK"),n=o("TEn/"),i=o("tk/3"),a=o("tyNb"),s=o("mrSG"),c=o("3Pt+"),l=o("fXoL"),b=o("XNvx"),u=o("Wdxn");function f(t,r){1&t&&l.Lb(0)}function m(t,r){1&t&&l.Lb(0)}function d(t,r){1&t&&(l.Pb(0,"div"),l.lc(1,"*Email is required"),l.Ob())}function p(t,r){1&t&&(l.Pb(0,"div"),l.lc(1,"Enter valid *email"),l.Ob())}function g(t,r){if(1&t&&(l.Pb(0,"div",14),l.jc(1,d,2,0,"div",15),l.jc(2,p,2,0,"div",15),l.Ob()),2&t){var o=l.Zb(2);l.zb(1),l.cc("ngIf",o.f.Email.errors.required),l.zb(1),l.cc("ngIf",o.f.Email.errors.email)}}function h(t,r){if(1&t){var o=l.Qb();l.Pb(0,"ion-toolbar"),l.Pb(1,"ion-buttons",4),l.Kb(2,"ion-icon",5),l.Ob(),l.Ob(),l.Pb(3,"ion-grid"),l.Pb(4,"p",6),l.lc(5,"Forgot your password? "),l.Kb(6,"br"),l.lc(7," Let's recover it"),l.Ob(),l.Pb(8,"ion-card"),l.Pb(9,"form",7),l.Xb("ngSubmit",(function(){l.gc(o);var t=l.Zb();return t.getEmail(t.EmailForm.value)})),l.Pb(10,"ion-row"),l.Pb(11,"ion-col",8),l.Pb(12,"div"),l.Pb(13,"ion-item",9),l.Pb(14,"ion-label",10),l.lc(15," Email "),l.Ob(),l.Kb(16,"ion-input",11),l.Ob(),l.jc(17,g,3,2,"div",12),l.Ob(),l.Ob(),l.Pb(18,"button",13),l.lc(19," Send OTP"),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob()}if(2&t){var e=l.Zb();l.zb(9),l.cc("formGroup",e.EmailForm),l.zb(8),l.cc("ngIf",e.checkValid&&e.f.Email.errors)}}function P(t,r){1&t&&(l.Pb(0,"div"),l.lc(1,"*Password is required"),l.Ob())}function v(t,r){if(1&t&&(l.Pb(0,"div",14),l.jc(1,P,2,0,"div",15),l.Ob()),2&t){var o=l.Zb(2);l.zb(1),l.cc("ngIf",o.frmValid.newPassword.errors.required)}}function O(t,r){1&t&&(l.Pb(0,"div"),l.lc(1,"*Otp is required"),l.Ob())}function w(t,r){if(1&t&&(l.Pb(0,"div",14),l.jc(1,O,2,0,"div",15),l.Ob()),2&t){var o=l.Zb(2);l.zb(1),l.cc("ngIf",o.frmValid.otp.errors.required)}}function k(t,r){if(1&t){var o=l.Qb();l.Pb(0,"ion-toolbar"),l.Pb(1,"ion-buttons",16),l.Xb("click",(function(){return l.gc(o),l.Zb().route()})),l.Kb(2,"ion-icon",17),l.Ob(),l.Ob(),l.Pb(3,"ion-grid"),l.Pb(4,"p",6),l.lc(5,"Forgot your password? "),l.Kb(6,"br"),l.lc(7," Let's recover it"),l.Ob(),l.Pb(8,"ion-card"),l.Pb(9,"form",7),l.Xb("ngSubmit",(function(){l.gc(o);var t=l.Zb();return t.postOtp(t.OtpForm.value)})),l.Pb(10,"ion-row"),l.Pb(11,"ion-col",8),l.Pb(12,"div"),l.Pb(13,"ion-item",18),l.Pb(14,"ion-label",10),l.lc(15," New Password"),l.Ob(),l.Kb(16,"ion-input",19),l.Ob(),l.jc(17,v,2,1,"div",12),l.Pb(18,"ion-item",18),l.Pb(19,"ion-label",10),l.lc(20," OTP"),l.Ob(),l.Kb(21,"ion-input",20),l.Ob(),l.jc(22,w,2,1,"div",12),l.Ob(),l.Ob(),l.Pb(23,"button",21),l.lc(24," Update Password"),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob()}if(2&t){var e=l.Zb();l.zb(9),l.cc("formGroup",e.OtpForm),l.zb(8),l.cc("ngIf",e.otpFormValid&&e.frmValid.newPassword.errors),l.zb(5),l.cc("ngIf",e.otpFormValid&&e.frmValid.otp.errors)}}var y,C,E,x=[{path:"",component:(y=function(){function t(r,o,e,n,i,a,s){_classCallCheck(this,t),this.fb=r,this.http=o,this.api=e,this.loadingController=n,this.alertController=i,this.router=a,this.alert=s,this.checkValid=!1,this.otpFormValid=!1,this.otpPost=!1,this.forgotPassword=!0}return _createClass(t,[{key:"ngOnInit",value:function(){this.EmailForm=this.fb.group({Email:["",[c.j.required,c.j.email]]}),this.OtpForm=this.fb.group({otp:["",[c.j.required]],newPassword:["",[c.j.required]]})}},{key:"route",value:function(){console.log("hello"),this.otpPost=!1,this.forgotPassword=!0}},{key:"getEmail",value:function(t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,e=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(console.log(t.Email),this.checkValid=!0,!this.EmailForm.invalid){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,this.loadingController.create({message:"Please wait..."});case 4:(o=r.sent).present(),this.api.forgotPassword(t.Email).subscribe((function(r){console.log(r),console.log(t),localStorage.setItem("grocericaforgotEmail",t.Email),o.dismiss(),e.alert.presentToast("Otp Sent Successfully to your email"),e.forgotPassword=!1,e.otpPost=!0,e.otpFormValid=!1}),(function(t){o.dismiss(),console.log(t),"User not found"===t.error.message&&400===t.status&&e.alert.presentToast(t.error.message),500===t.status&&e.alert.presentToast("Something went wrong")}));case 6:case"end":return r.stop()}}),r,this)})))}},{key:"postOtp",value:function(t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,e=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.otpFormValid=!0,!this.OtpForm.invalid){r.next=2;break}return r.abrupt("return");case 2:return t.email=localStorage.getItem("grocericaforgotEmail"),console.log(t),r.next=5,this.loadingController.create({message:"Please wait..."});case 5:(o=r.sent).present(),this.api.postOtp(t).subscribe((function(t){console.log(t),o.dismiss(),e.presentAlertConfirm(t.message)}),(function(t){console.log(t),o.dismiss(),"User not found"===t.error.message&&400===t.status&&e.alert.presentToast(t.error.message),"OTP doesn't matched"===t.error.message&&500===t.status&&e.alert.presentToast(t.error.message)}));case 7:case"end":return r.stop()}}),r,this)})))}},{key:"presentAlertConfirm",value:function(t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var o,e=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({cssClass:"my-custom-class",header:t,message:"Login to your Account",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(t){console.log("Confirm Cancel: blah")}},{text:"Okay",handler:function(){console.log("Confirm Okay"),e.router.navigate(["login"])}}]});case 2:return o=r.sent,r.next=5,o.present();case 5:case"end":return r.stop()}}),r,this)})))}},{key:"f",get:function(){return this.EmailForm.controls}},{key:"frmValid",get:function(){return this.OtpForm.controls}}]),t}(),y.\u0275fac=function(t){return new(t||y)(l.Jb(c.a),l.Jb(i.a),l.Jb(b.a),l.Jb(n.G),l.Jb(n.a),l.Jb(a.g),l.Jb(u.a))},y.\u0275cmp=l.Db({type:y,selectors:[["app-forgotpassord"]],decls:7,vars:4,consts:[[1,"background",2,"background-color","rgb(6, 15, 66)"],[4,"ngIf","ngIfThen"],["forgotEmailForm",""],["otpEnterForm",""],["slot","start"],["name","arrow-back","routerLink","/login"],[1,"text"],[1,"ion-padding",3,"formGroup","ngSubmit"],[1,"ion-float-right"],[2,"background-color","transparent"],["position","fixed",2,"color","#919090"],["type","text","formControlName","Email",2,"color","#fff","margin-left","-15px"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],["color","primary","type","ngSubmit",1,"button-submit"],["id","errorStyle",1,"invalid-feedback"],[4,"ngIf"],["slot","start",3,"click"],["name","arrow-back"],[1,"input-password"],["type","password","formControlName","newPassword",2,"color","#fff"],["type","text","formControlName","otp",2,"color","#fff"],["color","primary","color","primary","type","ngSubmit",1,"button-submit"]],template:function(t,r){if(1&t&&(l.Pb(0,"ion-content",0),l.jc(1,f,1,0,"ng-container",1),l.jc(2,m,1,0,"ng-container",1),l.jc(3,h,20,2,"ng-template",null,2,l.kc),l.jc(5,k,25,3,"ng-template",null,3,l.kc),l.Ob()),2&t){var o=l.fc(4),e=l.fc(6);l.zb(1),l.cc("ngIf",r.forgotPassword)("ngIfThen",o),l.zb(1),l.cc("ngIf",r.otpPost)("ngIfThen",e)}},directives:[n.g,e.k,n.D,n.d,n.m,n.L,a.h,n.k,n.e,c.k,c.h,c.c,n.y,n.f,n.o,n.p,n.n,n.N,c.g,c.b],styles:[".text[_ngcontent-%COMP%]{color:#a4a4a4;text-align:center;font-size:30px;margin-top:44%}.input-password[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{flex:0 0 130px}"]}),y)}],j=((E=function t(){_classCallCheck(this,t)}).\u0275mod=l.Hb({type:E}),E.\u0275inj=l.Gb({factory:function(t){return new(t||E)},imports:[[a.i.forChild(x)],a.i]}),E),F=((C=function t(){_classCallCheck(this,t)}).\u0275mod=l.Hb({type:C}),C.\u0275inj=l.Gb({factory:function(t){return new(t||C)},providers:[b.a],imports:[[e.b,c.d,c.i,i.b,n.E,j]]}),C)}}]);