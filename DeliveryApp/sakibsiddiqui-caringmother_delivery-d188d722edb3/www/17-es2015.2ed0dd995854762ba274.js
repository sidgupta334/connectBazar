(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{cRhG:function(e,o,t){"use strict";t.r(o),t.d(o,"ProfilePageModule",(function(){return j}));var n=t("ofXK"),i=t("3Pt+"),r=t("TEn/"),l=t("tyNb"),b=t("mrSG"),c=t("fXoL"),s=t("Wdxn"),a=t("tk/3"),d=t("lJxs"),u=t("Bl/W");let f=(()=>{class e{constructor(e,o){this.http=e,this.url=o,this.baseUrl=u.a.url}getUserDetails(){var e=new a.c;return e=e.set("token",localStorage.getItem("grocericatoken")),this.http.get(this.baseUrl+"/users/me",{headers:e}).pipe(Object(d.a)(e=>e))}updateProfile(e){console.log(e),console.log(e.dob),console.log(e.email),console.log(e.name),console.log(e.gender),console.log(e.mobile),console.log(e.userId);var o=new a.c;return o=o.set("token",localStorage.getItem("grocericatoken")),this.http.post(this.baseUrl+"/users/update",{dob:e.dob,email:e.email,fullName:e.name,gender:e.gender,mobile:e.mobile,userId:e.userId},{headers:o}).pipe(Object(d.a)(e=>e))}}return e.\u0275fac=function(o){return new(o||e)(c.Tb(a.a),c.Tb(u.a))},e.\u0275prov=c.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function g(e,o){1&e&&c.Lb(0)}function m(e,o){1&e&&c.Lb(0)}function h(e,o){if(1&e){const e=c.Qb();c.Pb(0,"h1"),c.lc(1,"View Your Profile"),c.Ob(),c.Pb(2,"ion-card",11),c.Pb(3,"div",12),c.Pb(4,"p"),c.lc(5),c.Ob(),c.Ob(),c.Pb(6,"ion-list"),c.Pb(7,"ion-item"),c.Pb(8,"ion-label",13),c.lc(9,"Name: "),c.Pb(10,"span",14),c.lc(11),c.Ob(),c.Ob(),c.Ob(),c.Pb(12,"ion-item"),c.Pb(13,"ion-label",13),c.lc(14,"DOB: "),c.Pb(15,"span",14),c.lc(16),c.Ob(),c.Ob(),c.Ob(),c.Pb(17,"ion-item"),c.Pb(18,"ion-label",13),c.lc(19,"Email Id: "),c.Pb(20,"span",14),c.lc(21),c.Ob(),c.Ob(),c.Ob(),c.Pb(22,"ion-item"),c.Pb(23,"ion-label",13),c.lc(24,"Phone No: "),c.Pb(25,"span",14),c.lc(26),c.Ob(),c.Ob(),c.Ob(),c.Pb(27,"ion-item"),c.Pb(28,"ion-label",13),c.lc(29,"Gender: "),c.Pb(30,"span",14),c.lc(31),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(32,"ion-fab",15),c.Pb(33,"ion-fab-button",16),c.Xb("click",(function(){return c.gc(e),c.Zb().editProfile()})),c.Kb(34,"img",17),c.Ob(),c.Ob()}if(2&e){const e=c.Zb();c.zb(5),c.mc(e.letter),c.zb(6),c.mc(null==e.user?null:e.user.fullName),c.zb(5),c.mc(null==e.user?null:e.user.dob),c.zb(5),c.mc(null==e.user?null:e.user.email),c.zb(5),c.mc(null==e.user?null:e.user.mobile),c.zb(5),c.mc(null==e.user?null:e.user.gender)}}function p(e,o){1&e&&(c.Pb(0,"div"),c.lc(1,"*Name is required"),c.Ob())}function P(e,o){if(1&e&&(c.Pb(0,"div",26),c.jc(1,p,2,0,"div",10),c.Ob()),2&e){const e=c.Zb(2);c.zb(1),c.cc("ngIf",e.f.name.errors.required)}}function O(e,o){1&e&&(c.Pb(0,"div",28),c.lc(1," *Dob is required "),c.Ob())}function w(e,o){if(1&e&&(c.Pb(0,"div",26),c.jc(1,O,2,0,"div",27),c.Ob()),2&e){const e=c.Zb(2);c.zb(1),c.cc("ngIf",e.f.dob.errors.required)}}function k(e,o){1&e&&(c.Pb(0,"div",28),c.lc(1," *gender is required "),c.Ob())}function y(e,o){if(1&e&&(c.Pb(0,"div",26),c.jc(1,k,2,0,"div",27),c.Ob()),2&e){const e=c.Zb(2);c.zb(1),c.cc("ngIf",e.f.gender.errors.required)}}function v(e,o){if(1&e&&(c.Pb(0,"form",18),c.Pb(1,"h1"),c.lc(2,"Edit Your Profile"),c.Ob(),c.Pb(3,"ion-card",11),c.Pb(4,"div",12),c.Pb(5,"p"),c.lc(6),c.Ob(),c.Ob(),c.Pb(7,"ion-list"),c.Pb(8,"ion-row"),c.Pb(9,"ion-col",19),c.Pb(10,"ion-item"),c.Pb(11,"ion-label",20),c.lc(12," Name:"),c.Ob(),c.Kb(13,"ion-input",21),c.Ob(),c.jc(14,P,2,1,"div",22),c.Ob(),c.Ob(),c.Pb(15,"ion-row"),c.Pb(16,"ion-col"),c.Pb(17,"ion-item"),c.Pb(18,"ion-label",20),c.lc(19," DOB:"),c.Ob(),c.Kb(20,"ion-input",23),c.jc(21,w,2,1,"div",22),c.Ob(),c.Ob(),c.Ob(),c.Pb(22,"ion-row"),c.Pb(23,"ion-col"),c.Pb(24,"ion-item"),c.Pb(25,"ion-label",20),c.lc(26," Email Id:"),c.Ob(),c.Pb(27,"span",24),c.lc(28),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(29,"ion-row"),c.Pb(30,"ion-col"),c.Pb(31,"ion-item"),c.Pb(32,"ion-label",20),c.lc(33," Phone No:"),c.Ob(),c.Pb(34,"span",24),c.lc(35),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(36,"ion-row"),c.Pb(37,"ion-col"),c.Pb(38,"ion-item"),c.Pb(39,"ion-label",20),c.lc(40," Gender:"),c.Ob(),c.Kb(41,"ion-input",25),c.jc(42,y,2,1,"div",22),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob()),2&e){const e=c.Zb();c.cc("formGroup",e.EditForm),c.zb(6),c.mc(e.letter),c.zb(8),c.cc("ngIf",e.checkValid&&e.f.name.errors),c.zb(7),c.cc("ngIf",e.checkValid&&e.f.dob.errors),c.zb(7),c.nc(" ",null==e.user?null:e.user.email,""),c.zb(7),c.mc(null==e.user?null:e.user.mobile),c.zb(7),c.cc("ngIf",e.checkValid&&e.f.gender.errors)}}function I(e,o){if(1&e){const e=c.Qb();c.Pb(0,"div"),c.Pb(1,"button",29),c.Xb("click",(function(){c.gc(e);const o=c.Zb();return o.updateAddress(o.EditForm.value)})),c.lc(2,"Update Profile"),c.Ob(),c.Ob()}}const x=[{path:"",component:(()=>{class e{constructor(e,o,t,n,i){this.common=e,this.formBuilder=o,this.datePipe=t,this.loadingController=n,this.api=i,this.showProfile=!0,this.checkValid=!1}ngOnInit(){this.EditForm=this.formBuilder.group({dob:["",[i.j.required]],name:["",[i.j.required]],gender:["",[i.j.required]]})}get f(){return this.EditForm.controls}getUserDetails(){this.api.getUserDetails().subscribe(e=>{this.user=e,console.log(this.user);const o=this.user.fullName;this.letter=o.slice(0,1);let t=this.datePipe.transform(this.user.dob,"yyyy-MM-dd");this.user.dob=t,console.log(o)})}editProfile(){this.showProfile=!1,this.EditForm.controls.name.setValue(this.user.fullName),this.EditForm.controls.dob.setValue(this.datePipe.transform(this.user.dob,"yyyy-MM-dd")),this.EditForm.controls.gender.setValue(this.user.gender)}updateAddress(e){return Object(b.a)(this,void 0,void 0,(function*(){if(console.log(e),e.userId=this.user.userId,e.email=this.user.email,e.mobile=this.user.mobile,this.checkValid=!0,this.EditForm.invalid)return;const o=yield this.loadingController.create({message:"Updating..."});o.present(),this.api.updateProfile(e).subscribe(e=>{console.log(e),e&&(o.dismiss(),this.common.presentToast("Profile is updated"),this.showProfile=!0,this.getUserDetails())},e=>{o.dismiss(),this.common.presentToast("Something went wrong? Try Again")})}))}ionViewWillEnter(){this.quantity=localStorage.getItem("grocericaQuantity"),this.getUserDetails()}logout(){return Object(b.a)(this,void 0,void 0,(function*(){console.log("logout"),this.common.logout()}))}}return e.\u0275fac=function(o){return new(o||e)(c.Jb(s.a),c.Jb(i.a),c.Jb(n.d),c.Jb(r.G),c.Jb(f))},e.\u0275cmp=c.Db({type:e,selectors:[["app-profile"]],decls:17,vars:5,consts:[["color","primary",2,"height","52px"],["slot","start"],["name","arrow-back","routerLink","/home"],["slot","end","tab","search"],[2,"margin-left","-60px",3,"click"],["name","power",2,"font-size","38px"],[1,"appBackground"],[4,"ngIf","ngIfThen"],["show",""],["editForm",""],[4,"ngIf"],[2,"margin-top","25px"],[1,"nameCol"],[2,"color","#a4a4a4","font-size","20px","font-family","Roboto"],[2,"font-weight","bolder"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["src","../../assets/edit.png",2,"color","white","font-weight","bold"],[3,"formGroup"],[1,"ion-float-right"],["position","fixed",2,"color","#919090"],["type","text","formControlName","name"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],["type","text","formControlName","dob"],[2,"font-weight","bolder","color","#fff"],["type","text","formControlName","gender"],["id","errorStyle",1,"invalid-feedback"],["style","color: red;",4,"ngIf"],[2,"color","red"],["type","ngSubmit",1,"updateButton",3,"click"]],template:function(e,o){if(1&e&&(c.Pb(0,"ion-header"),c.Pb(1,"ion-toolbar",0),c.Pb(2,"ion-buttons",1),c.Kb(3,"ion-icon",2),c.Ob(),c.Pb(4,"ion-title"),c.lc(5,"Profile"),c.Ob(),c.Pb(6,"ion-buttons",3),c.Pb(7,"ion-button",4),c.Xb("click",(function(){return o.logout()})),c.Kb(8,"ion-icon",5),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(9,"ion-content",6),c.jc(10,g,1,0,"ng-container",7),c.jc(11,m,1,0,"ng-container",7),c.jc(12,h,35,6,"ng-template",null,8,c.kc),c.jc(14,v,43,7,"ng-template",null,9,c.kc),c.Ob(),c.jc(16,I,3,0,"div",10)),2&e){const e=c.fc(13),t=c.fc(15);c.zb(10),c.cc("ngIf",o.showProfile)("ngIfThen",e),c.zb(1),c.cc("ngIf",!o.showProfile)("ngIfThen",t),c.zb(5),c.cc("ngIf",!o.showProfile)}},directives:[r.l,r.D,r.d,r.m,r.L,l.h,r.C,r.c,r.g,n.k,r.e,r.q,r.o,r.p,r.i,r.j,i.k,i.h,i.c,r.y,r.f,r.n,r.N,i.g,i.b],styles:["h1[_ngcontent-%COMP%]{font-family:Roboto;font-style:normal;font-weight:700;font-size:26px;line-height:30px;text-align:center;color:#a4a4a4}.nameCol[_ngcontent-%COMP%]{height:113px;width:121px;background:radial-gradient(50% 50% at 50% 50%,#227c98 0,rgba(70,211,255,0) 100%);display:block;margin-left:auto;margin-right:auto}p[_ngcontent-%COMP%]{text-align:center;padding:21px;font-size:50px;color:#fff;font-weight:bolder}ion-list[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin-top:20px}ion-list[_ngcontent-%COMP%]{background-color:transparent}ion-item[_ngcontent-%COMP%]{--background:transparent!important;background-color:transparent;--border-color:#a4a4a4;height:70px}img[_ngcontent-%COMP%]{color:#fff;height:40px}.updateButton[_ngcontent-%COMP%]{width:100%;height:50px;font-size:20px;font-family:Roboto;color:#fff;font-weight:700;background-color:#6b00c2}"]}),e})()}];let z=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(o){return new(o||e)},imports:[[l.i.forChild(x)],l.i]}),e})(),j=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(o){return new(o||e)},providers:[s.a,f,n.d],imports:[[n.b,i.d,r.E,a.b,i.i,z]]}),e})()}}]);