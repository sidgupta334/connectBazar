(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{RdcS:function(o,t,r){"use strict";r.r(t),r.d(t,"ForgotpassordPageModule",(function(){return j}));var i=r("ofXK"),e=r("TEn/"),n=r("tk/3"),s=r("tyNb"),a=r("mrSG"),c=r("3Pt+"),l=r("fXoL"),b=r("XNvx"),d=r("Wdxn");function m(o,t){1&o&&l.Lb(0)}function f(o,t){1&o&&l.Lb(0)}function u(o,t){1&o&&(l.Pb(0,"div"),l.lc(1,"*Email is required"),l.Ob())}function g(o,t){1&o&&(l.Pb(0,"div"),l.lc(1,"Enter valid *email"),l.Ob())}function p(o,t){if(1&o&&(l.Pb(0,"div",14),l.jc(1,u,2,0,"div",15),l.jc(2,g,2,0,"div",15),l.Ob()),2&o){const o=l.Zb(2);l.zb(1),l.cc("ngIf",o.f.Email.errors.required),l.zb(1),l.cc("ngIf",o.f.Email.errors.email)}}function h(o,t){if(1&o){const o=l.Qb();l.Pb(0,"ion-toolbar"),l.Pb(1,"ion-buttons",4),l.Kb(2,"ion-icon",5),l.Ob(),l.Ob(),l.Pb(3,"ion-grid"),l.Pb(4,"p",6),l.lc(5,"Forgot your password? "),l.Kb(6,"br"),l.lc(7," Let's recover it"),l.Ob(),l.Pb(8,"ion-card"),l.Pb(9,"form",7),l.Xb("ngSubmit",(function(){l.gc(o);const t=l.Zb();return t.getEmail(t.EmailForm.value)})),l.Pb(10,"ion-row"),l.Pb(11,"ion-col",8),l.Pb(12,"div"),l.Pb(13,"ion-item",9),l.Pb(14,"ion-label",10),l.lc(15," Email "),l.Ob(),l.Kb(16,"ion-input",11),l.Ob(),l.jc(17,p,3,2,"div",12),l.Ob(),l.Ob(),l.Pb(18,"button",13),l.lc(19," Send OTP"),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob()}if(2&o){const o=l.Zb();l.zb(9),l.cc("formGroup",o.EmailForm),l.zb(8),l.cc("ngIf",o.checkValid&&o.f.Email.errors)}}function P(o,t){1&o&&(l.Pb(0,"div"),l.lc(1,"*Password is required"),l.Ob())}function O(o,t){if(1&o&&(l.Pb(0,"div",14),l.jc(1,P,2,0,"div",15),l.Ob()),2&o){const o=l.Zb(2);l.zb(1),l.cc("ngIf",o.frmValid.newPassword.errors.required)}}function w(o,t){1&o&&(l.Pb(0,"div"),l.lc(1,"*Otp is required"),l.Ob())}function v(o,t){if(1&o&&(l.Pb(0,"div",14),l.jc(1,w,2,0,"div",15),l.Ob()),2&o){const o=l.Zb(2);l.zb(1),l.cc("ngIf",o.frmValid.otp.errors.required)}}function y(o,t){if(1&o){const o=l.Qb();l.Pb(0,"ion-toolbar"),l.Pb(1,"ion-buttons",16),l.Xb("click",(function(){return l.gc(o),l.Zb().route()})),l.Kb(2,"ion-icon",17),l.Ob(),l.Ob(),l.Pb(3,"ion-grid"),l.Pb(4,"p",6),l.lc(5,"Forgot your password? "),l.Kb(6,"br"),l.lc(7," Let's recover it"),l.Ob(),l.Pb(8,"ion-card"),l.Pb(9,"form",7),l.Xb("ngSubmit",(function(){l.gc(o);const t=l.Zb();return t.postOtp(t.OtpForm.value)})),l.Pb(10,"ion-row"),l.Pb(11,"ion-col",8),l.Pb(12,"div"),l.Pb(13,"ion-item",18),l.Pb(14,"ion-label",10),l.lc(15," New Password"),l.Ob(),l.Kb(16,"ion-input",19),l.Ob(),l.jc(17,O,2,1,"div",12),l.Pb(18,"ion-item",18),l.Pb(19,"ion-label",10),l.lc(20," OTP"),l.Ob(),l.Kb(21,"ion-input",20),l.Ob(),l.jc(22,v,2,1,"div",12),l.Ob(),l.Ob(),l.Pb(23,"button",21),l.lc(24," Update Password"),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob()}if(2&o){const o=l.Zb();l.zb(9),l.cc("formGroup",o.OtpForm),l.zb(8),l.cc("ngIf",o.otpFormValid&&o.frmValid.newPassword.errors),l.zb(5),l.cc("ngIf",o.otpFormValid&&o.frmValid.otp.errors)}}const E=[{path:"",component:(()=>{class o{constructor(o,t,r,i,e,n,s){this.fb=o,this.http=t,this.api=r,this.loadingController=i,this.alertController=e,this.router=n,this.alert=s,this.checkValid=!1,this.otpFormValid=!1,this.otpPost=!1,this.forgotPassword=!0}ngOnInit(){this.EmailForm=this.fb.group({Email:["",[c.j.required,c.j.email]]}),this.OtpForm=this.fb.group({otp:["",[c.j.required]],newPassword:["",[c.j.required]]})}get f(){return this.EmailForm.controls}get frmValid(){return this.OtpForm.controls}route(){console.log("hello"),this.otpPost=!1,this.forgotPassword=!0}getEmail(o){return Object(a.a)(this,void 0,void 0,(function*(){if(console.log(o.Email),this.checkValid=!0,this.EmailForm.invalid)return;const t=yield this.loadingController.create({message:"Please wait..."});t.present(),this.api.forgotPassword(o.Email).subscribe(r=>{console.log(r),console.log(o),localStorage.setItem("grocericaforgotEmail",o.Email),t.dismiss(),this.alert.presentToast("Otp Sent Successfully to your email"),this.forgotPassword=!1,this.otpPost=!0,this.otpFormValid=!1},o=>{t.dismiss(),console.log(o),"User not found"===o.error.message&&400===o.status&&this.alert.presentToast(o.error.message),500===o.status&&this.alert.presentToast("Something went wrong")})}))}postOtp(o){return Object(a.a)(this,void 0,void 0,(function*(){if(this.otpFormValid=!0,this.OtpForm.invalid)return;o.email=localStorage.getItem("grocericaforgotEmail"),console.log(o);const t=yield this.loadingController.create({message:"Please wait..."});t.present(),this.api.postOtp(o).subscribe(o=>{console.log(o),t.dismiss(),this.presentAlertConfirm(o.message)},o=>{console.log(o),t.dismiss(),"User not found"===o.error.message&&400===o.status&&this.alert.presentToast(o.error.message),"OTP doesn't matched"===o.error.message&&500===o.status&&this.alert.presentToast(o.error.message)})}))}presentAlertConfirm(o){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:o,message:"Login to your Account",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:o=>{console.log("Confirm Cancel: blah")}},{text:"Okay",handler:()=>{console.log("Confirm Okay"),this.router.navigate(["login"])}}]});yield t.present()}))}}return o.\u0275fac=function(t){return new(t||o)(l.Jb(c.a),l.Jb(n.a),l.Jb(b.a),l.Jb(e.G),l.Jb(e.a),l.Jb(s.g),l.Jb(d.a))},o.\u0275cmp=l.Db({type:o,selectors:[["app-forgotpassord"]],decls:7,vars:4,consts:[[1,"background",2,"background-color","rgb(6, 15, 66)"],[4,"ngIf","ngIfThen"],["forgotEmailForm",""],["otpEnterForm",""],["slot","start"],["name","arrow-back","routerLink","/login"],[1,"text"],[1,"ion-padding",3,"formGroup","ngSubmit"],[1,"ion-float-right"],[2,"background-color","transparent"],["position","fixed",2,"color","#919090"],["type","text","formControlName","Email",2,"color","#fff","margin-left","-15px"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],["color","primary","type","ngSubmit",1,"button-submit"],["id","errorStyle",1,"invalid-feedback"],[4,"ngIf"],["slot","start",3,"click"],["name","arrow-back"],[1,"input-password"],["type","password","formControlName","newPassword",2,"color","#fff"],["type","text","formControlName","otp",2,"color","#fff"],["color","primary","color","primary","type","ngSubmit",1,"button-submit"]],template:function(o,t){if(1&o&&(l.Pb(0,"ion-content",0),l.jc(1,m,1,0,"ng-container",1),l.jc(2,f,1,0,"ng-container",1),l.jc(3,h,20,2,"ng-template",null,2,l.kc),l.jc(5,y,25,3,"ng-template",null,3,l.kc),l.Ob()),2&o){const o=l.fc(4),r=l.fc(6);l.zb(1),l.cc("ngIf",t.forgotPassword)("ngIfThen",o),l.zb(1),l.cc("ngIf",t.otpPost)("ngIfThen",r)}},directives:[e.g,i.k,e.D,e.d,e.m,e.L,s.h,e.k,e.e,c.k,c.h,c.c,e.y,e.f,e.o,e.p,e.n,e.N,c.g,c.b],styles:[".text[_ngcontent-%COMP%]{color:#a4a4a4;text-align:center;font-size:30px;margin-top:44%}.input-password[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{flex:0 0 130px}"]}),o})()}];let k=(()=>{class o{}return o.\u0275mod=l.Hb({type:o}),o.\u0275inj=l.Gb({factory:function(t){return new(t||o)},imports:[[s.i.forChild(E)],s.i]}),o})(),j=(()=>{class o{}return o.\u0275mod=l.Hb({type:o}),o.\u0275inj=l.Gb({factory:function(t){return new(t||o)},providers:[b.a],imports:[[i.b,c.d,c.i,n.b,e.E,k]]}),o})()}}]);