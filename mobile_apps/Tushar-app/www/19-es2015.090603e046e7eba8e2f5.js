(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{X3zk:function(o,e,t){"use strict";t.r(e),t.d(e,"LoginPageModule",(function(){return w}));var r=t("ofXK"),i=t("3Pt+"),n=t("TEn/"),a=t("tyNb"),c=t("mrSG"),l=t("fXoL"),s=t("tk/3"),g=t("XNvx"),b=t("Wdxn"),m=t("VYYF"),d=t("up+p");function f(o,e){1&o&&(l.Pb(0,"div"),l.nc(1,"*Email is required"),l.Ob())}function u(o,e){1&o&&(l.Pb(0,"div"),l.nc(1,"Enter valid *email"),l.Ob())}function p(o,e){if(1&o&&(l.Pb(0,"div",18),l.lc(1,f,2,0,"div",17),l.lc(2,u,2,0,"div",17),l.Ob()),2&o){const o=l.Zb();l.zb(1),l.cc("ngIf",o.f.email.errors.required),l.zb(1),l.cc("ngIf",o.f.email.errors.email)}}function h(o,e){1&o&&(l.Pb(0,"div"),l.nc(1,"*Password is required"),l.Ob())}function v(o,e){if(1&o&&(l.Pb(0,"div",18),l.lc(1,h,2,0,"div",17),l.Ob()),2&o){const o=l.Zb();l.zb(1),l.cc("ngIf",o.f.password.errors.required)}}function O(o,e){1&o&&(l.Nb(0),l.Pb(1,"p",19),l.nc(2," New User? "),l.Pb(3,"u"),l.nc(4,"Signup instead"),l.Ob(),l.Ob(),l.Mb())}const P=[{path:"",component:(()=>{class o{constructor(o,e,t,r,i,n,a,c,l){this.fb=o,this.http=e,this.api=t,this.alert=r,this.statusBar=i,this.router=n,this.googlePlus=a,this.loadingController=c,this.menu=l,this.formValidation=!1,this.signupText=!0}ngOnInit(){this.menu.swipeGesture(!1),this.LoginForm=this.fb.group({email:["",[i.l.required,i.l.email]],password:["",[i.l.required]]}),this.removeAllStorageItems()}removeAllStorageItems(){localStorage.removeItem("grocericatoken"),localStorage.removeItem("userDetail"),localStorage.removeItem("user"),localStorage.removeItem("userIdSignUp"),localStorage.removeItem("grocericastart"),localStorage.removeItem("grocericaQuantity"),localStorage.removeItem("grocericaSelectedAddress"),localStorage.removeItem("grocericaforgotEmail"),localStorage.removeItem("userId"),localStorage.removeItem("grocericaProduct"),localStorage.removeItem("reviewProduct"),localStorage.removeItem("viewFeedback"),localStorage.removeItem("grocericaOrderId"),localStorage.removeItem("grocericaViewCart"),localStorage.removeItem("grocericaemail"),localStorage.removeItem("userIdSignUp"),localStorage.removeItem("cartCount")}get f(){return this.LoginForm.controls}login(o){return Object(c.a)(this,void 0,void 0,(function*(){if(console.log(o),this.formValidation=!0,this.LoginForm.invalid)return;const e=this.api.login(o),t=yield this.loadingController.create({message:"Please wait..."});t.present(),e.subscribe(o=>Object(c.a)(this,void 0,void 0,(function*(){console.log(o),yield t.dismiss(),localStorage.setItem("grocericatoken",o.token),localStorage.setItem("grocericastart","starttoken"),localStorage.setItem("grocericaemail",o.email),localStorage.setItem("user",o.fullName),localStorage.setItem("userDetail",JSON.stringify(o)),this.router.navigate(["/home"])})),o=>Object(c.a)(this,void 0,void 0,(function*(){if(yield t.dismiss(),"PENDING"===o.error.message){const e=yield this.loadingController.create({message:"Please wait..."});e.present(),this.api.activateAccount(o.error.userId).subscribe(o=>Object(c.a)(this,void 0,void 0,(function*(){console.log(o),yield e.dismiss(),this.router.navigate(["/activate-otp"])})),o=>{console.log(o)})}400===o.status&&this.alert.presentToast("Invalid Details")})))}))}googleSignIn(){return Object(c.a)(this,void 0,void 0,(function*(){console.log("hellloooo");const o=yield this.loadingController.create({message:"Please wait..."});o.present(),this.googlePlus.login({}).then(e=>{console.log(e),o.dismiss(),localStorage.setItem("grocericatoken",e.accessToken),localStorage.setItem("grocericastart","starttoken"),localStorage.setItem("grocericaemail",e.email),localStorage.setItem("user",e.givenName),this.router.navigate(["/home"]),this.userData=e}).catch(o=>{this.userData="Error "+JSON.stringify(o),this.alert.presentToast("Something went wrong")})}))}ionViewWillEnter(){localStorage.getItem("grocericatoken")&&(this.signupText=!1)}}return o.\u0275fac=function(e){return new(e||o)(l.Jb(i.a),l.Jb(s.a),l.Jb(g.a),l.Jb(b.a),l.Jb(m.a),l.Jb(a.g),l.Jb(d.a),l.Jb(n.N),l.Jb(n.O))},o.\u0275cmp=l.Db({type:o,selectors:[["app-login"]],decls:40,vars:4,consts:[["src","../../assets/login.png","alt","caring mother",2,"background-color","rgb(6, 15, 66)","object-fit","cover"],[1,"background"],["src","../../assets/icon.png","alt","caring mother",1,"login"],[1,"text"],[3,"formGroup","ngSubmit"],[1,"ion-float-left",2,"border-bottom","1px solid #fff"],["lines","none",2,"background-color","transparent"],["position","fixed",2,"color","#fff"],["formControlName","email"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],[1,"ion-float-right",2,"border-bottom","1px solid #fff"],["lines","none"],["type","password","formControlName","password"],[1,"login-ctr"],["type","ngSubmit",1,"des-button","login-btn"],["routerLink","/forgotpassord",2,"text-align","start","color","white","margin-left","20px","font-size","15px"],["routerLink","/home",2,"text-align","end","color","white","margin-right","20px","font-size","15px"],[4,"ngIf"],["id","errorStyle",1,"invalid-feedback"],["routerLink","/signup",1,"signup",2,"color","white","font-size","18px"]],template:function(o,e){1&o&&(l.Kb(0,"img",0),l.Pb(1,"ion-content",1),l.Pb(2,"div"),l.Kb(3,"img",2),l.Pb(4,"p",3),l.nc(5,"Welcome to Connect Bazar, "),l.Kb(6,"br"),l.nc(7,"Let's Sign in"),l.Ob(),l.Pb(8,"ion-card"),l.Pb(9,"ion-grid"),l.Pb(10,"form",4),l.Xb("ngSubmit",(function(){return e.login(e.LoginForm.value)})),l.Pb(11,"ion-row"),l.Pb(12,"ion-col",5),l.Pb(13,"div"),l.Pb(14,"ion-item",6),l.Pb(15,"ion-label",7),l.nc(16,"Email"),l.Ob(),l.Kb(17,"ion-input",8),l.Ob(),l.lc(18,p,3,2,"div",9),l.Ob(),l.Ob(),l.Ob(),l.Pb(19,"ion-row"),l.Pb(20,"ion-col",10),l.Pb(21,"div"),l.Pb(22,"ion-item",11),l.Pb(23,"ion-label",7),l.nc(24," Password"),l.Ob(),l.Kb(25,"ion-input",12),l.Ob(),l.lc(26,v,2,1,"div",9),l.Ob(),l.Ob(),l.Ob(),l.Pb(27,"div",13),l.Pb(28,"ion-button",14),l.nc(29," Login"),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.Pb(30,"ion-row"),l.Pb(31,"ion-col"),l.Pb(32,"p",15),l.Pb(33,"u"),l.nc(34,"Forgot password?"),l.Ob(),l.Ob(),l.Ob(),l.Pb(35,"ion-col"),l.Pb(36,"p",16),l.Pb(37,"u"),l.nc(38," Skip for now >> "),l.Ob(),l.Ob(),l.Ob(),l.Ob(),l.lc(39,O,5,0,"ng-container",17),l.Ob()),2&o&&(l.zb(10),l.cc("formGroup",e.LoginForm),l.zb(8),l.cc("ngIf",e.formValidation&&e.f.email.errors),l.zb(8),l.cc("ngIf",e.formValidation&&e.f.password.errors),l.zb(13),l.cc("ngIf",e.signupText))},directives:[n.j,n.g,n.n,i.m,i.i,i.c,n.B,n.i,n.r,n.s,n.q,n.U,i.h,i.b,r.k,n.e,n.S,a.h],styles:[".background[_ngcontent-%COMP%]{--background:#060f42;margin-top:200px!important}ion-item[_ngcontent-%COMP%]{--background:transparent!important}ion-grid[_ngcontent-%COMP%]{margin-top:40px}ion-card[_ngcontent-%COMP%]{align-items:center;height:260px;background:hsla(0,0%,76.9%,.12);border-radius:15px}ion-icon[_ngcontent-%COMP%]{color:#000;font-size:30px}ion-input[_ngcontent-%COMP%]{color:#fff;margin-left:15px}ion-button[_ngcontent-%COMP%]{width:100%;margin-top:15px;padding-left:5%;padding-right:5%}p[_ngcontent-%COMP%]{color:#000;text-align:center;font-size:14px}.login[_ngcontent-%COMP%]{border-radius:15px;height:100px;margin-top:24px;margin-left:auto;margin-right:auto;display:block}.text[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-style:normal;font-weight:400;font-size:30px;line-height:35px;color:#fff}ion-toolbar[_ngcontent-%COMP%]{--background:transparent;--ion-color-base:transparent!important}u[_ngcontent-%COMP%]{-webkit-text-decoration-color:#fff;text-decoration-color:#fff}@media only screen and (max-width:360px){.text[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-style:normal;font-weight:400;font-size:24px;color:#fff}}.item-highlight[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3}"]}),o})()}];let S=(()=>{class o{}return o.\u0275mod=l.Hb({type:o}),o.\u0275inj=l.Gb({factory:function(e){return new(e||o)},imports:[[a.i.forChild(P)],a.i]}),o})();var I=t("w1Tr");let w=(()=>{class o{}return o.\u0275mod=l.Hb({type:o}),o.\u0275inj=l.Gb({factory:function(e){return new(e||o)},providers:[g.a,d.a],imports:[[r.b,i.d,i.k,n.L,s.b,I.a,S]]}),o})()}}]);