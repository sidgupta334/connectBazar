(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{v35Q:function(o,t,i){"use strict";i.r(t),i.d(t,"CartPageModule",(function(){return x}));var n=i("ofXK"),e=i("3Pt+"),c=i("TEn/"),r=i("tyNb"),s=i("mrSG"),a=i("fXoL"),b=i("Bl/W"),d=i("Wdxn"),l=i("Nagw");function u(o,t){1&o&&(a.Pb(0,"div",12),a.Pb(1,"h1",13),a.nc(2,"NO ITEM IN CART"),a.Ob(),a.Pb(3,"h4",14),a.nc(4," Continue Shoping"),a.Ob(),a.Ob())}function p(o,t){if(1&o){const o=a.Qb();a.Pb(0,"ion-card",16),a.Pb(1,"ion-row"),a.Pb(2,"ion-col",17),a.Kb(3,"img",18),a.Ob(),a.Pb(4,"ion-col",19),a.Pb(5,"div",20),a.Pb(6,"div",21),a.Pb(7,"p",22),a.nc(8),a.Pb(9,"span"),a.Pb(10,"del",23),a.nc(11),a.Ob(),a.Ob(),a.Pb(12,"span"),a.Pb(13,"label",24),a.nc(14),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(15,"div",25),a.Pb(16,"p",26),a.nc(17),a.Pb(18,"span",27),a.nc(19),a.Ob(),a.Kb(20,"span"),a.Ob(),a.Ob(),a.Pb(21,"div",28),a.Pb(22,"ion-button",29),a.Xb("click",(function(){a.ic(o);const i=t.$implicit;return a.Zb(2).removeFromCart(i)})),a.nc(23,"-"),a.Ob(),a.Pb(24,"p",30),a.nc(25),a.Ob(),a.Pb(26,"ion-button",31),a.Xb("click",(function(){a.ic(o);const i=t.$implicit;return a.Zb(2).addToCart(i)})),a.nc(27,"+"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&o){const o=t.$implicit;a.zb(3),a.cc("src",o.url,a.jc),a.zb(5),a.pc(" \u20b9",o.newPrice," "),a.zb(3),a.pc("\u20b9",o.oldPrice,""),a.zb(3),a.pc(" ",o.discountPercentage,"% Off "),a.zb(3),a.pc(" ",o.productName,""),a.zb(2),a.pc(" - (",o.brand,") "),a.zb(6),a.oc(o.quantity)}}function h(o,t){if(1&o&&(a.Pb(0,"div"),a.lc(1,p,28,7,"ion-card",15),a.Ob()),2&o){const o=a.Zb();a.zb(1),a.cc("ngForOf",o.cart)}}function f(o,t){1&o&&(a.Pb(0,"div"),a.nc(1,"*enter coupon code"),a.Ob())}function g(o,t){if(1&o&&(a.Pb(0,"div",39),a.lc(1,f,2,0,"div",11),a.Ob()),2&o){const o=a.Zb(3);a.zb(1),a.cc("ngIf",o.Promo.controls.couponName.errors.required)}}function m(o,t){1&o&&(a.Pb(0,"div"),a.Pb(1,"ion-button",40),a.nc(2," Apply"),a.Ob(),a.Ob())}function P(o,t){1&o&&(a.Pb(0,"div"),a.Pb(1,"ion-button",41),a.nc(2," Applied"),a.Ob(),a.Ob())}function O(o,t){if(1&o){const o=a.Qb();a.Pb(0,"div"),a.Pb(1,"form",32),a.Xb("ngSubmit",(function(){a.ic(o);const t=a.Zb(2);return t.applyPromo(t.Promo.value)})),a.Pb(2,"p",33),a.nc(3,"Have Promocode?"),a.Ob(),a.Pb(4,"ion-row",34),a.Pb(5,"ion-col",35),a.Pb(6,"div"),a.Pb(7,"ion-item",36),a.Kb(8,"ion-input",37),a.Ob(),a.lc(9,g,2,1,"div",38),a.Ob(),a.Ob(),a.lc(10,m,3,0,"div",11),a.lc(11,P,3,0,"div",11),a.Kb(12,"ion-col"),a.Ob(),a.Ob(),a.Ob()}if(2&o){const o=a.Zb(2);a.zb(1),a.cc("formGroup",o.Promo),a.zb(8),a.cc("ngIf",o.checkValid&&o.Promo.controls.couponName.errors),a.zb(1),a.cc("ngIf",o.couponButton),a.zb(1),a.cc("ngIf",o.couponButtonApplied)}}function v(o,t){if(1&o&&(a.Pb(0,"div"),a.lc(1,O,13,4,"div",11),a.Ob()),2&o){const o=a.Zb();a.zb(1),a.cc("ngIf",o.hasGotResponse)}}function w(o,t){if(1&o&&(a.Nb(0),a.Pb(1,"p",48),a.nc(2),a.Ob(),a.Mb()),2&o){const o=a.Zb(2);a.zb(2),a.pc("\u20b9 ",o.total," ")}}function C(o,t){if(1&o&&(a.Nb(0),a.Pb(1,"p",48),a.nc(2),a.Pb(3,"span"),a.Pb(4,"del",49),a.nc(5),a.Ob(),a.Ob(),a.Ob(),a.Mb()),2&o){const o=a.Zb(2);a.zb(2),a.pc("\u20b9 ",o.updatedPrice," "),a.zb(3),a.pc("\u20b9",o.oldPrice," ")}}function y(o,t){if(1&o&&(a.Pb(0,"div"),a.Pb(1,"div",42),a.Pb(2,"div"),a.Pb(3,"p",43),a.nc(4,"TOTAL"),a.Ob(),a.Pb(5,"ion-row"),a.Pb(6,"ion-col",44),a.lc(7,w,3,1,"ng-container",11),a.lc(8,C,6,2,"ng-container",11),a.Ob(),a.Pb(9,"ion-col",45),a.Pb(10,"ion-button",46),a.nc(11," CHECKOUT "),a.Kb(12,"ion-icon",47),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&o){const o=a.Zb();a.zb(7),a.cc("ngIf",o.withoutCoupon),a.zb(1),a.cc("ngIf",o.couponApplied)}}const I=[{path:"",component:(()=>{class o{constructor(o,t,i,n,e,c,r){this.homePageApi=o,this.router=t,this.common=i,this.formbuilder=n,this.alert=e,this.loadingController=c,this.api=r,this.showMsg=!1,this.showCart=!0,this.checkValid=!1,this.couponButton=!0,this.withoutCoupon=!0,this.hasGotResponse=!1}ngOnInit(){this.Promo=this.formbuilder.group({couponName:["",e.l.required]})}openModel(){this.common.openModal()}viewCart(o=null){return Object(s.a)(this,void 0,void 0,(function*(){if(o){this.cartId=o.cartId,this.quantity=o.netQuantity;for(let t=0;t<o.products.length;t++)o.products[t].discountPercentage=Math.round((o.products[t].oldPrice-o.products[t].newPrice)/o.products[t].oldPrice*100),console.log(o.products[t].discountPercentage);this.cart=o.products,this.total=o.netTotal,this.couponApplied=!1,this.couponButtonApplied=!1,this.couponButton=!0,this.withoutCoupon=!0,0==this.quantity&&(this.showMsg=!0,this.showCart=!1)}else{const o=yield this.loadingController.create({message:"Please wait..."});o.present(),this.api.viewCart().subscribe(t=>Object(s.a)(this,void 0,void 0,(function*(){this.hasGotResponse=!0,yield o.dismiss(),console.log("CART VALUE",t),this.cartId=t.cartId,this.quantity=t.netQuantity;for(let o=0;o<t.products.length;o++)t.products[o].discountPercentage=Math.round((t.products[o].oldPrice-t.products[o].newPrice)/t.products[o].oldPrice*100),console.log(t.products[o].discountPercentage);this.cart=t.products,this.total=t.netTotal,this.couponApplied=!1,this.couponButtonApplied=!1,this.couponButton=!0,this.withoutCoupon=!0,0==this.quantity&&(this.showMsg=!0,this.showCart=!1)})),t=>Object(s.a)(this,void 0,void 0,(function*(){yield o.dismiss(),500==t.status&&(this.showMsg=!0,this.showCart=!1),console.log(t)})))}this.showCart=!0}))}applyPromo(o){return Object(s.a)(this,void 0,void 0,(function*(){if(console.log(o),o.cartId=this.cartId,this.userId=JSON.parse(localStorage.getItem("userDetail")),o.userId=this.userId.userId,console.log(this.userId),o.amount=this.total,this.checkValid=!0,this.Promo.invalid)return;const t=yield this.loadingController.create({message:"Please wait..."});t.present(),this.api.applyPromoCade(o).subscribe(i=>Object(s.a)(this,void 0,void 0,(function*(){console.log(i),this.oldPrice=i.oldPrice,this.updatedPrice=i.updatedPrice,localStorage.setItem("updatedprice",this.updatedPrice),this.couponApplied=!0,this.couponButtonApplied=!0,this.withoutCoupon=!1,this.couponButton=!1,localStorage.setItem("couponCode",o.couponName),yield t.dismiss()})),o=>Object(s.a)(this,void 0,void 0,(function*(){console.log(o),500==o.status&&(this.alert.presentToast("INVALID COUPON"),yield t.dismiss())})))}))}addToCart(o){return Object(s.a)(this,void 0,void 0,(function*(){const t=yield this.loadingController.create({message:"Please wait..."});t.present(),this.api.addToCart(o.productId).subscribe(o=>Object(s.a)(this,void 0,void 0,(function*(){yield t.dismiss(),console.log(o),this.viewCart(o)})))}))}removeFromCart(o){return Object(s.a)(this,void 0,void 0,(function*(){const t=yield this.loadingController.create({message:"Please wait..."});t.present(),this.api.removeFromCart(o.productId).subscribe(o=>Object(s.a)(this,void 0,void 0,(function*(){yield t.dismiss(),console.log(o),this.viewCart(o)})))}))}ionViewWillEnter(){return Object(s.a)(this,void 0,void 0,(function*(){if(console.log("I am In"),this.viewCart(),console.log(this.quantity),this.token=localStorage.getItem("grocericatoken"),console.log(this.token),0==this.quantity&&null==this.token){const o=yield this.common.presentAlertConfirm("Login to add product in cart");o.present(),o.onDidDismiss().then(o=>{console.log(o),!0===o.data&&this.router.navigate(["/login"]),"backdrop"===o.role&&(this.common.presentToast("Login to add product in cart"),setTimeout(()=>{this.router.navigate(["/login"])},3033))})}}))}}return o.\u0275fac=function(t){return new(t||o)(a.Jb(b.a),a.Jb(r.g),a.Jb(d.a),a.Jb(e.a),a.Jb(d.a),a.Jb(c.N),a.Jb(l.a))},o.\u0275cmp=a.Db({type:o,selectors:[["app-cart"]],decls:18,vars:5,consts:[["color","primary",2,"height","52px"],["slot","start"],["name","arrow-back","routerLink","/home"],["slot","end","tab","search"],[3,"click"],["name","search",1,"cart-icon"],["routerLink","/cart",2,"margin-left","6px","position","relative"],["name","cart",2,"font-size","24px"],["slot","end",2,"border-radius","50%"],[1,"appBackground"],["style","margin-top: 60px;",4,"ngIf"],[4,"ngIf"],[2,"margin-top","60px"],[2,"font-size","24px","color","aliceblue","text-align","center"],["routerLink","/home",2,"text-align","center","color","#fff"],["class","ion-card-category",4,"ngFor","ngForOf"],[1,"ion-card-category"],["size","4"],["alt","caring mother",1,"cart-image",3,"src"],[1,"cate-ion-col"],[1,"cate-parent"],[1,"rupee-status"],[1,"class-ruppee"],[1,"class-del"],["id","product-label",1,"class-off-button"],[1,"branddiv"],[1,"class-product"],[1,"class-brand"],[1,"cate-more"],[1,"incButton","des-button",3,"click"],[1,"incText"],[1,"decButton","des-button",3,"click"],[3,"formGroup","ngSubmit"],[1,"promocode"],[2,"margin-top","-30px","margin-left","10%"],["size","8",1,"ion-float-right"],[2,"background-color","transparent"],["type","text","formControlName","couponName",2,"color","#fff"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],["id","errorStyle",1,"invalid-feedback"],["type","ngSubmit",1,"des-button"],[1,""],[1,"cart-background",2,"border-top","1px solid #E5E5E5"],[2,"margin-bottom","-19px","margin-left","25px"],["size","6",1,"ion-float-right"],["size","6"],["type","ngSubmit","routerLink","/choose-address",1,"checkout-button","des-button"],["name","arrow-forward",2,"font-size","20px","color","#fff","margin-left","15px"],[1,"promocode",2,"font-weight","bold","font-size","24px","margin-left","20px"],[2,"color","grey","font-size","20px"]],template:function(o,t){1&o&&(a.Pb(0,"ion-header"),a.Pb(1,"ion-toolbar",0),a.Pb(2,"ion-buttons",1),a.Kb(3,"ion-icon",2),a.Ob(),a.Pb(4,"ion-title"),a.nc(5,"Review Cart"),a.Ob(),a.Pb(6,"ion-buttons",3),a.Pb(7,"ion-button",4),a.Xb("click",(function(){return t.openModel()})),a.Kb(8,"ion-icon",5),a.Ob(),a.Pb(9,"ion-button",6),a.Kb(10,"ion-icon",7),a.Pb(11,"ion-badge",8),a.nc(12),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(13,"ion-content",9),a.lc(14,u,5,0,"div",10),a.lc(15,h,2,1,"div",11),a.lc(16,v,2,1,"div",11),a.Ob(),a.lc(17,y,13,2,"div",11)),2&o&&(a.zb(12),a.oc(t.quantity),a.zb(2),a.cc("ngIf",t.showMsg),a.zb(1),a.cc("ngIf",t.showCart),a.zb(1),a.cc("ngIf",t.showCart),a.zb(1),a.cc("ngIf",t.showCart&&t.hasGotResponse))},directives:[c.o,c.K,c.f,c.p,c.S,r.h,c.J,c.e,c.d,c.j,n.k,n.j,c.g,c.B,c.i,e.m,e.i,e.c,c.r,c.q,c.U,e.h,e.b],styles:["ion-item[_ngcontent-%COMP%]{--border-color:#fff}"]}),o})()}];let z=(()=>{class o{}return o.\u0275mod=a.Hb({type:o}),o.\u0275inj=a.Gb({factory:function(t){return new(t||o)},imports:[[r.i.forChild(I)],r.i]}),o})();var k=i("tk/3");let x=(()=>{class o{}return o.\u0275mod=a.Hb({type:o}),o.\u0275inj=a.Gb({factory:function(t){return new(t||o)},providers:[l.a,b.a],imports:[[n.b,e.d,c.L,k.b,e.k,z]]}),o})()}}]);