(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{RdcS:function(t,o,r){"use strict";r.r(o),r.d(o,"ForgotpassordPageModule",(function(){return k}));var n=r("ofXK"),i=r("TEn/"),e=r("tk/3"),s=r("tyNb"),a=r("mrSG"),c=r("3Pt+"),b=r("fXoL"),l=r("XNvx"),d=r("Wdxn");function f(t,o){1&t&&b.Lb(0)}function u(t,o){1&t&&b.Lb(0)}function m(t,o){1&t&&(b.Pb(0,"div"),b.nc(1,"*Email is required"),b.Ob())}function p(t,o){1&t&&(b.Pb(0,"div"),b.nc(1,"Enter valid *email"),b.Ob())}function g(t,o){if(1&t&&(b.Pb(0,"div",14),b.lc(1,m,2,0,"div",15),b.lc(2,p,2,0,"div",15),b.Ob()),2&t){const t=b.Zb(2);b.zb(1),b.cc("ngIf",t.f.Email.errors.required),b.zb(1),b.cc("ngIf",t.f.Email.errors.email)}}function h(t,o){if(1&t){const t=b.Qb();b.Pb(0,"ion-toolbar"),b.Pb(1,"ion-buttons",4),b.Kb(2,"ion-icon",5),b.Ob(),b.Ob(),b.Pb(3,"ion-grid"),b.Pb(4,"p",6),b.nc(5,"Forgot your password? "),b.Kb(6,"br"),b.nc(7," Let's recover it"),b.Ob(),b.Pb(8,"ion-card"),b.Pb(9,"form",7),b.Xb("ngSubmit",(function(){b.ic(t);const o=b.Zb();return o.getEmail(o.EmailForm.value)})),b.Pb(10,"ion-row"),b.Pb(11,"ion-col",8),b.Pb(12,"div"),b.Pb(13,"ion-item",9),b.Pb(14,"ion-label",10),b.nc(15," Email "),b.Ob(),b.Kb(16,"ion-input",11),b.Ob(),b.lc(17,g,3,2,"div",12),b.Ob(),b.Ob(),b.Pb(18,"button",13),b.nc(19," Send OTP"),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob()}if(2&t){const t=b.Zb();b.zb(9),b.cc("formGroup",t.EmailForm),b.zb(8),b.cc("ngIf",t.checkValid&&t.f.Email.errors)}}function P(t,o){1&t&&(b.Pb(0,"div"),b.nc(1,"*Otp is required"),b.Ob())}function O(t,o){if(1&t&&(b.Pb(0,"div",14),b.lc(1,P,2,0,"div",15),b.Ob()),2&t){const t=b.Zb(2);b.zb(1),b.cc("ngIf",t.frmValid.otp.errors.required)}}function w(t,o){1&t&&(b.Pb(0,"div"),b.nc(1,"*Password is required"),b.Ob())}function v(t,o){if(1&t&&(b.Pb(0,"div",14),b.lc(1,w,2,0,"div",15),b.Ob()),2&t){const t=b.Zb(2);b.zb(1),b.cc("ngIf",t.frmValid.newPassword.errors.required)}}function y(t,o){if(1&t){const t=b.Qb();b.Pb(0,"ion-toolbar"),b.Pb(1,"ion-buttons",16),b.Xb("click",(function(){return b.ic(t),b.Zb().route()})),b.Kb(2,"ion-icon",17),b.Ob(),b.Ob(),b.Pb(3,"ion-grid"),b.Pb(4,"p",6),b.nc(5,"Forgot your password? "),b.Kb(6,"br"),b.nc(7," Let's recover it"),b.Ob(),b.Pb(8,"ion-card"),b.Pb(9,"form",7),b.Xb("ngSubmit",(function(){b.ic(t);const o=b.Zb();return o.postOtp(o.OtpForm.value)})),b.Pb(10,"ion-row"),b.Pb(11,"ion-col",8),b.Pb(12,"div"),b.Pb(13,"ion-item",18),b.Pb(14,"ion-label",10),b.nc(15," OTP"),b.Ob(),b.Kb(16,"ion-input",19),b.Ob(),b.lc(17,O,2,1,"div",12),b.Pb(18,"ion-item",18),b.Pb(19,"ion-label",10),b.nc(20," New Password"),b.Ob(),b.Kb(21,"ion-input",20),b.Ob(),b.lc(22,v,2,1,"div",12),b.Ob(),b.Ob(),b.Pb(23,"button",13),b.nc(24," Update Password"),b.Ob(),b.Ob(),b.Ob(),b.Ob(),b.Ob()}if(2&t){const t=b.Zb();b.zb(9),b.cc("formGroup",t.OtpForm),b.zb(8),b.cc("ngIf",t.otpFormValid&&t.frmValid.otp.errors),b.zb(5),b.cc("ngIf",t.otpFormValid&&t.frmValid.newPassword.errors)}}const E=[{path:"",component:(()=>{class t{constructor(t,o,r,n,i,e,s,a){this.fb=t,this.http=o,this.api=r,this.loadingController=n,this.alertController=i,this.router=e,this.alert=s,this.menu=a,this.checkValid=!1,this.otpFormValid=!1,this.otpPost=!1,this.forgotPassword=!0}ngOnInit(){this.menu.swipeGesture(!1),this.EmailForm=this.fb.group({Email:["",[c.l.required,c.l.email]]}),this.OtpForm=this.fb.group({otp:["",[c.l.required]],newPassword:["",[c.l.required]]})}get f(){return this.EmailForm.controls}get frmValid(){return this.OtpForm.controls}route(){this.otpPost=!1,this.forgotPassword=!0}getEmail(t){return Object(a.a)(this,void 0,void 0,(function*(){if(this.checkValid=!0,this.EmailForm.invalid)return;const o=yield this.loadingController.create({message:"Please wait..."});o.present(),this.api.forgotPassword(t.Email).subscribe(r=>{localStorage.setItem("grocericaforgotEmail",t.Email),o.dismiss(),this.alert.presentToast("Otp Sent Successfully to your email"),this.forgotPassword=!1,this.otpPost=!0,this.otpFormValid=!1},t=>{o.dismiss(),"User not found"===t.error.message&&400===t.status&&this.alert.presentToast(t.error.message),500===t.status&&this.alert.presentToast("Something went wrong")})}))}postOtp(t){return Object(a.a)(this,void 0,void 0,(function*(){if(this.otpFormValid=!0,this.OtpForm.invalid)return;t.email=localStorage.getItem("grocericaforgotEmail");const o=yield this.loadingController.create({message:"Please wait..."});o.present(),this.api.postOtp(t).subscribe(t=>{o.dismiss(),this.presentAlertConfirm(t.message)},t=>{o.dismiss(),"User not found"===t.error.message&&400===t.status&&this.alert.presentToast(t.error.message),"OTP doesn't matched"===t.error.message&&500===t.status&&this.alert.presentToast(t.error.message)})}))}presentAlertConfirm(t){return Object(a.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({cssClass:"my-custom-class",header:t,message:"Login to your Account",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Okay",handler:()=>{this.router.navigate(["login"])}}]});yield o.present()}))}}return t.\u0275fac=function(o){return new(o||t)(b.Jb(c.a),b.Jb(e.a),b.Jb(l.a),b.Jb(i.N),b.Jb(i.a),b.Jb(s.g),b.Jb(d.a),b.Jb(i.O))},t.\u0275cmp=b.Db({type:t,selectors:[["app-forgotpassord"]],decls:7,vars:4,consts:[[1,"background",2,"background-color","rgb(6, 15, 66)"],[4,"ngIf","ngIfThen"],["forgotEmailForm",""],["otpEnterForm",""],["slot","start"],["name","arrow-back","routerLink","/login"],[1,"text"],[1,"ion-padding",3,"formGroup","ngSubmit"],[1,"ion-float-right"],["lines","none",2,"background-color","transparent"],["position","fixed",2,"color","#fff"],["type","text","formControlName","Email",2,"color","#fff","margin-left","-15px"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],["type","ngSubmit",1,"button-submit","des-button"],["id","errorStyle",1,"invalid-feedback"],[4,"ngIf"],["slot","start",3,"click"],["name","arrow-back"],["lines","none",1,"input-password"],["type","text","formControlName","otp",2,"color","#fff"],["type","password","formControlName","newPassword",2,"color","#fff"]],template:function(t,o){if(1&t&&(b.Pb(0,"ion-content",0),b.lc(1,f,1,0,"ng-container",1),b.lc(2,u,1,0,"ng-container",1),b.lc(3,h,20,2,"ng-template",null,2,b.mc),b.lc(5,y,25,3,"ng-template",null,3,b.mc),b.Ob()),2&t){const t=b.hc(4),r=b.hc(6);b.zb(1),b.cc("ngIf",o.forgotPassword)("ngIfThen",t),b.zb(1),b.cc("ngIf",o.otpPost)("ngIfThen",r)}},directives:[i.j,n.k,i.K,i.f,i.p,i.S,s.h,i.n,i.g,c.m,c.i,c.c,i.B,i.i,i.r,i.s,i.q,i.U,c.h,c.b],styles:[".text[_ngcontent-%COMP%]{color:#fff;text-align:center;font-size:30px;margin-top:44%}.input-password[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{flex:0 0 130px}ion-input[_ngcontent-%COMP%]{color:#fff}"]}),t})()}];let F=(()=>{class t{}return t.\u0275mod=b.Hb({type:t}),t.\u0275inj=b.Gb({factory:function(o){return new(o||t)},imports:[[s.i.forChild(E)],s.i]}),t})(),k=(()=>{class t{}return t.\u0275mod=b.Hb({type:t}),t.\u0275inj=b.Gb({factory:function(o){return new(o||t)},providers:[l.a],imports:[[n.b,c.d,c.k,e.b,i.L,F]]}),t})()}}]);