<ion-header>
    <ion-toolbar color="primary">
        <ion-buttons slot="start">
            <ion-icon name="arrow-back" routerLink="/home"></ion-icon>
        </ion-buttons>
        <ion-title>Profile</ion-title>
        <ion-buttons slot="end" tab="search">
            <ion-button (click)="openModel()">
                <ion-icon name="search" class="search-icon"></ion-icon>
            </ion-button>
            <ion-button style="margin-left: 6px; position: relative;" routerLink="/cart">
                <ion-icon name="cart" style="font-size: 24px;"></ion-icon>
                <ion-badge slot="end" style="border-radius: 50%;">{{quantity}}</ion-badge>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content class="appBackground">
    <ng-container *ngIf="showProfile; then show"></ng-container>
    <ng-container *ngIf="!showProfile; then editForm"></ng-container>
    <ng-template #show>
        <h1>View Your Profile</h1>
        <ion-card style="margin-top: 25px;">
            <div class="nameCol">
                <p>{{this.letter}}</p>
            </div>
            <ion-list>
                <ion-item lines="none">
                    <ion-label style="color: #fff; font-size: 20px; font-family: OpenSans-Light;">Name:
                        <span style="font-weight: bolder;">{{this.user?.fullName}}</span
            ></ion-label
          >
        </ion-item>
        <ion-item lines="none">
          <ion-label
            style="color: #fff; font-size: 20px; font-family: OpenSans-Light;"
            >DOB:
            <span style="font-weight: bolder;"
              >{{this.user?.dob}}</span
            ></ion-label
          >
        </ion-item>
        <ion-item lines="none">
          <ion-label
            style="color: #fff; font-size: 20px; font-family: OpenSans-Light;"
            >Email Id:
            <span style="font-weight: bolder;"
              >{{this.user?.email}}</span
            ></ion-label
          >
        </ion-item>
        <ion-item lines="none">
          <ion-label
            style="color: #fff; font-size: 20px; font-family: OpenSans-Light;"
            >Phone No:
            <span style="font-weight: bolder;"
              >{{this.user?.mobile}}</span
            ></ion-label
          >
        </ion-item>
        <ion-item lines="none">
          <ion-label
            style="color: #fff; font-size: 20px; font-family: OpenSans-Light;"
            >Gender:
            <span style="font-weight: bolder;"
              >{{this.user?.gender}}</span
            ></ion-label
          >
        </ion-item>
      </ion-list>
    </ion-card>

    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
      <ion-fab-button class="des-button" style="border-radius: 40px;" (click)="editProfile()">
        <img
          src="../../assets/edit.png"
          style="color: white; font-weight: bold;"
        />
      </ion-fab-button>
    </ion-fab>
  </ng-template>



  <ng-template #editForm>
    <form [formGroup]="EditForm">
      <h1>Edit Your Profile</h1>
      <ion-card style="margin-top: 25px;">
        <div class="nameCol">
          <p>{{this.letter}}</p>
        </div>
        <ion-list>
          <ion-row>
            <ion-col class="ion-float-right" style="border-bottom: 1px solid #fff;">
              <ion-item lines="none">
                <ion-label position="fixed" style="color: #fff;">
                  Name:</ion-label
                >
                <ion-input type="text" formControlName="name"> </ion-input>
              </ion-item>
              <div
                id="errorStyle"
                *ngIf="checkValid && f.name.errors"
                class="invalid-feedback"
              >
                <div *ngIf="f.name.errors.required">*Name is required</div>
              </div>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col style="border-bottom: 1px solid #fff;">
              <ion-item lines="none">
                <ion-label position="fixed" style="color: #fff;">
                  DOB:</ion-label
                >
                <ion-input type="text" formControlName="dob"> </ion-input>
                <div
                  id="errorStyle"
                  *ngIf="checkValid && f.dob.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="f.dob.errors.required" style="color: red;">
                    *Dob is required
                  </div>
                </div>
              </ion-item>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col style="border-bottom: 1px solid #fff;">
              <ion-item lines="none">
                <ion-label position="fixed" style="color: #fff;">
                  Email Id:</ion-label
                ><span style="font-weight: bolder; color: #fff;"> {{this.user?.email}}</span>
                </ion-item>
                </ion-col>
                </ion-row>

                <ion-row>
                    <ion-col style="border-bottom: 1px solid #fff;">
                        <ion-item lines="none">
                            <ion-label position="fixed" style="color: #fff;">
                                Phone No:</ion-label><span style="font-weight: bolder; color: #fff;">{{this.user?.mobile}}</span>
                        </ion-item>
                    </ion-col>
                </ion-row>

                <ion-row>
                    <ion-col style="border-bottom: 1px solid #fff;">
                        <ion-item lines="none">

                            <ion-label position="fixed" style="color: #fff;">
                                Gender</ion-label>
                            <ion-select style="color: #fff;
                  position: absolute;
                  right: 10px;" placeholder="Select" formControlName="gender">
                                <ion-select-option value="female" style="color: #fff;">Female</ion-select-option>
                                <ion-select-option value="male" style="color: #fff;">Male</ion-select-option>
                            </ion-select>

                        </ion-item>
                    </ion-col>
                </ion-row>
            </ion-list>
        </ion-card>
        </form>
    </ng-template>
</ion-content>
<div *ngIf="!showProfile">
    <button class="updateButton" type="ngSubmit" (click)="updateAddress(EditForm.value)">Update Profile</button>

</div>