(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{uZhx:function(t,e,o){"use strict";o.r(e),o.d(e,"ChooseAddressPageModule",(function(){return R}));var n=o("ofXK"),i=o("3Pt+"),r=o("TEn/"),s=o("Bg0J"),c=o("tyNb"),a=o("mrSG"),d=o("Af+r"),l=o("fXoL"),b=o("Wdxn"),h=o("Nagw"),p=o("Bl/W"),g=o("59dN"),f=o("4Xmu");function u(t,e){1&t&&(l.Rb(0,"h1"),l.qc(1,"Choose your delivery address"),l.Qb())}function m(t,e){1&t&&(l.Rb(0,"div",21),l.Mb(1,"img",22),l.Mb(2,"br"),l.Mb(3,"br"),l.Rb(4,"h6",23),l.qc(5," Looks like you don't have any address mapped, let's add new one."),l.Qb(),l.Qb())}const x=function(t,e){return{back2:t,back1:e}};function y(t,e){if(1&t){const t=l.Sb();l.Rb(0,"ion-card",24),l.Zb("click",(function(){l.lc(t);const o=e.$implicit;return l.bc().onSelect(o)})),l.Rb(1,"ion-row"),l.Rb(2,"ion-col",25),l.qc(3),l.Qb(),l.Qb(),l.Rb(4,"ion-row",26),l.Rb(5,"ion-col",27),l.qc(6," Address: "),l.Qb(),l.Rb(7,"ion-col",28),l.qc(8),l.Qb(),l.Qb(),l.Rb(9,"ion-row",29),l.Rb(10,"ion-col",30),l.qc(11,"Pincode:"),l.Rb(12,"span",28),l.qc(13),l.Qb(),l.Qb(),l.Mb(14,"ion-col",31),l.Rb(15,"ion-col",30),l.qc(16,"City: "),l.Rb(17,"span",28),l.qc(18),l.Qb(),l.Qb(),l.Qb(),l.Rb(19,"ion-row",29),l.Rb(20,"ion-col",30),l.qc(21,"State:"),l.Rb(22,"span",28),l.qc(23),l.Qb(),l.Qb(),l.Mb(24,"ion-col",31),l.Rb(25,"ion-col",30),l.qc(26," Country:"),l.Rb(27,"span",28),l.qc(28),l.Qb(),l.Qb(),l.Qb(),l.Rb(29,"div",32),l.Rb(30,"p"),l.qc(31),l.Qb(),l.Qb(),l.Qb()}if(2&t){const t=e.$implicit;l.ec("ngClass",l.ic(9,x,1==t.selected,0==t.selected)),l.Ab(3),l.sc(" ADDRESS TYPE: ",t.title," "),l.Ab(5),l.tc(" ",t.address1," ",t.address2," "),l.Ab(5),l.rc(t.pincode),l.Ab(5),l.rc(t.city),l.Ab(5),l.rc(t.state),l.Ab(5),l.rc(t.country),l.Ab(3),l.sc("Mobile:",t.mobile,"")}}const C=[{path:"",component:(()=>{class t{constructor(t,e,o,n,i,r,s,c,a,d,l){this.common=t,this.cartApi=e,this.api=o,this.loadingController=n,this.router=i,this.webIntent=r,this.userInfor=s,this.datePipe=c,this.localNotifications=a,this.platform=d,this.modalController=l,this.contactLess=!1,this.todaysDate=new Date,this.checkSelectAddress=!1,this.convertDate=this.datePipe.transform(this.todaysDate,"yyyyMMddHHmmss"),this.platform.ready().then(()=>{this.localNotifications.on("trigger").subscribe(t=>{})})}ngOnInit(){localStorage.getItem("updatedprice")?this.cartValue=localStorage.getItem("updatedprice"):this.cartApi.viewCart().subscribe(t=>{this.cartValue=t.netTotal}),this.userInfor.getUserDetails().subscribe(t=>{this.userDetail=t})}openModel(){this.common.openModal()}ionViewWillEnter(){this.quantity=localStorage.getItem("grocericaQuantity"),this.getAddress()}getAddress(){this.api.getAddress().subscribe(t=>{this.address=t;for(let e=0;e<this.address.length;e++)this.address[e].selected=!1})}openModalPage(){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:d.a,componentProps:{selector:"CHOOSE"}});return t.onDidDismiss().then(t=>{this.getAddress()}),yield t.present()}))}onSelect(t){for(let e=0;e<this.address.length;e++)if(this.address[e].selected=!1,this.address[e].addressId==t.addressId){this.address[e].selected=!0,this.checkSelectAddress=!0,localStorage.setItem("grocericaSelectedAddress",JSON.stringify(this.address[e]));const t=JSON.parse(localStorage.getItem("grocericaSelectedAddress"));this.orderAddress=t.addressId,this.verifyPincode=t}}verifyEvent(t){this.contactLess=t.detail.checked}verifyPin(t){return Object(a.a)(this,void 0,void 0,(function*(){0!=this.checkSelectAddress?this.cartApi.verifyPincode(this.verifyPincode.pincode).subscribe(e=>{"COD"==t?this.codOrder("COD"):this.upiOrder("UPI")},t=>{500!==t.status||this.common.presentToast("Currently we dont accept order in this area")}):this.common.presentToast("Please select address to place order")}))}codOrder(t){return Object(a.a)(this,void 0,void 0,(function*(){if(this.cartValue<200)return void this.common.presentToast(" Minimum amount \u20b9200 is required to continue");const e=yield this.loadingController.create({message:"Please wait..."}),o=localStorage.getItem("couponCode"),n=this.cartApi.placeOrder(this.orderAddress,this.cartValue,this.contactLess,t,o);e.present(),n.subscribe(t=>{localStorage.setItem("grocericaOrderId",t[0].orderId),localStorage.removeItem("updatedprice"),localStorage.removeItem("grocericaCategory"),localStorage.removeItem("couponCode"),e.dismiss(),this.common.presentToast("Order Successfully Placed"),this.common.scheduleNotification(t),this.router.navigate(["/order-placed",t[0].orderId])},t=>{e.dismiss(),500==t.status&&this.common.presentToast("Please Select Address"),this.common.presentToast("Something went wrong")})}))}upiOrder(t){this.convertDate=this.convertDate+this.userDetail.mobile+this.userDetail.userId,this.webIntent.startActivityForResult({action:this.webIntent.ACTION_VIEW,url:"upi://pay?pa=8999090358@ybl&pn=Connect Bazar&tid="+this.convertDate+"&tr=orderPayment&am=1&cu=INR&tn=ConnectBazar"}).then(e=>{"Success"!=e.extras.Status&&"SUCCESS"!=e.extras.Status||this.codOrder(t)},t=>{alert("error")})}}return t.\u0275fac=function(e){return new(e||t)(l.Lb(b.a),l.Lb(h.a),l.Lb(p.a),l.Lb(r.N),l.Lb(c.g),l.Lb(g.a),l.Lb(f.a),l.Lb(n.d),l.Lb(s.a),l.Lb(r.R),l.Lb(r.P))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-choose-address"]],decls:28,vars:4,consts:[["color","primary",2,"height","60px"],["slot","start"],["name","arrow-back","routerLink","/home"],["slot","end","tab","search"],[2,"margin-top","13px",3,"click"],["name","search",1,"search-icon"],["routerLink","/cart",2,"margin-left","6px","margin-top","13px","position","relative"],["name","cart",2,"font-size","38px"],["slot","end",2,"border-radius","50%"],[1,"appBackground"],[4,"ngIf"],["class","flex-head",4,"ngIf"],["style","margin-top: 15px",3,"ngClass","click",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],[1,"des-button",2,"border-radius","40px",3,"click"],["name","add",2,"color","white","font-weight","bold","font-size","30px"],[1,"cart-background",2,"padding-left","20px","height","80px"],[3,"ionChange"],[2,"color","#fff","font-family","OpenSans-Light","font-weight","bold","font-size","20px","margin-left","10px"],[1,"cart-background"],[1,"placeorder","des-button",3,"click"],[1,"flex-head"],["src","../../assets/not-found.png","alt","not found","width","40%"],[2,"margin","0 10px","text-align","center"],[2,"margin-top","15px",3,"ngClass","click"],[1,"AddressTYpe"],[2,"margin-top","5px"],["size","3",1,"Address"],[1,"AddressValue"],[2,"margin-top","0px"],["id","align",1,"Address"],["size","3"],[1,"mob"]],template:function(t,e){1&t&&(l.Rb(0,"ion-header"),l.Rb(1,"ion-toolbar",0),l.Rb(2,"ion-buttons",1),l.Mb(3,"ion-icon",2),l.Qb(),l.Mb(4,"ion-title"),l.Rb(5,"ion-buttons",3),l.Rb(6,"ion-button",4),l.Zb("click",(function(){return e.openModel()})),l.Mb(7,"ion-icon",5),l.Qb(),l.Rb(8,"ion-button",6),l.Mb(9,"ion-icon",7),l.Rb(10,"ion-badge",8),l.qc(11),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(12,"ion-content",9),l.oc(13,u,2,0,"h1",10),l.oc(14,m,6,0,"div",11),l.oc(15,y,32,12,"ion-card",12),l.Rb(16,"ion-fab",13),l.Rb(17,"ion-fab-button",14),l.Zb("click",(function(){return e.openModalPage()})),l.Mb(18,"ion-icon",15),l.Qb(),l.Qb(),l.Qb(),l.Rb(19,"div",16),l.Mb(20,"br"),l.Rb(21,"ion-checkbox",17),l.Zb("ionChange",(function(t){return e.verifyEvent(t)})),l.Qb(),l.Rb(22,"ion-label",18),l.qc(23,"Opt for Contactless Delivery"),l.Qb(),l.Qb(),l.Rb(24,"ion-row",19),l.Rb(25,"ion-col"),l.Rb(26,"button",20),l.Zb("click",(function(){return e.verifyPin("COD")})),l.qc(27,"Confirm Order"),l.Qb(),l.Qb(),l.Qb()),2&t&&(l.Ab(11),l.rc(e.quantity),l.Ab(2),l.ec("ngIf",(null==e.address?null:e.address.length)>0),l.Ab(1),l.ec("ngIf",0==(null==e.address?null:e.address.length)),l.Ab(1),l.ec("ngForOf",e.address))},directives:[r.o,r.K,r.f,r.p,r.S,c.h,r.J,r.e,r.d,r.j,n.k,n.j,r.l,r.m,r.h,r.b,r.s,r.B,r.i,r.g,n.i],styles:["h1[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-size:29px;line-height:30px;text-align:center;color:#fff}.AddressTYpe[_ngcontent-%COMP%]{border-bottom:1px solid #fff;font-weight:700;text-align:center}.Address[_ngcontent-%COMP%], .AddressTYpe[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-style:normal;font-size:16px;color:#fff}.Address[_ngcontent-%COMP%], .AddressValue[_ngcontent-%COMP%]{text-align:left}.AddressValue[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-weight:bolder;font-size:14px;color:#fff;padding-left:1px;padding-right:1px}#align[_ngcontent-%COMP%]{float:left;text-align:left}.mob[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-style:normal;font-size:16px;text-align:center;color:#fff;margin-top:10px;border-top:1px solid #fff}.fab[_ngcontent-%COMP%]{border-radius:50%;height:40px;width:36px;background:#45ae20}#back[_ngcontent-%COMP%]{background:#d24444}ion-fab-button[_ngcontent-%COMP%]{height:50px;width:54px}.back1[_ngcontent-%COMP%]{background:#1f2238;border-radius:10px;box-shadow:1px 5px 14px 0 rgba(0,1,0,.8)}.back2[_ngcontent-%COMP%]{background:#07556d}.bottom[_ngcontent-%COMP%]{background:#1f2238;border-radius:10px;box-shadow:1px 5px 14px 0 rgba(0,1,0,.8)}.placeorder[_ngcontent-%COMP%]{height:48px;font-family:OpenSans-Light;font-size:20px;text-align:center;margin-left:5%;width:90%;border-radius:9px;color:#fff;background-color:#6b00c2}.flex-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%}"]}),t})()}];let O=(()=>{class t{}return t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({factory:function(e){return new(e||t)},imports:[[c.i.forChild(C)],c.i]}),t})();var A=o("tk/3");let R=(()=>{class t{}return t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({factory:function(e){return new(e||t)},providers:[b.a,f.a,h.a,g.a,n.d,s.a,p.a],imports:[[n.b,i.d,r.L,i.k,A.b,O]]}),t})()}}]);