(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{X3zk:function(e,t,o){"use strict";o.r(t),o.d(t,"LoginPageModule",(function(){return k}));var r=o("ofXK"),i=o("3Pt+"),n=o("TEn/"),a=o("tyNb"),s=o("mrSG"),c=o("fXoL"),l=o("tk/3"),g=o("XNvx"),b=o("Wdxn"),m=o("VYYF"),d=o("up+p");function u(e,t){1&e&&(c.Rb(0,"div"),c.qc(1,"*Email is required"),c.Qb())}function f(e,t){1&e&&(c.Rb(0,"div"),c.qc(1,"Enter valid *email"),c.Qb())}function p(e,t){if(1&e&&(c.Rb(0,"div",21),c.oc(1,u,2,0,"div",20),c.oc(2,f,2,0,"div",20),c.Qb()),2&e){const e=c.bc();c.Ab(1),c.ec("ngIf",e.f.email.errors.required),c.Ab(1),c.ec("ngIf",e.f.email.errors.email)}}function h(e,t){1&e&&(c.Rb(0,"div"),c.qc(1,"*Password is required"),c.Qb())}function v(e,t){if(1&e&&(c.Rb(0,"div",21),c.oc(1,h,2,0,"div",20),c.Qb()),2&e){const e=c.bc();c.Ab(1),c.ec("ngIf",e.f.password.errors.required)}}function I(e,t){1&e&&(c.Pb(0),c.Rb(1,"p",22),c.qc(2," New User? "),c.Rb(3,"u"),c.qc(4,"Signup instead"),c.Qb(),c.Qb(),c.Ob())}const S=[{path:"",component:(()=>{class e{constructor(e,t,o,r,i,n,a,s,c){this.fb=e,this.http=t,this.api=o,this.alert=r,this.statusBar=i,this.router=n,this.googlePlus=a,this.loadingController=s,this.menu=c,this.formValidation=!1,this.signupText=!0}ngOnInit(){this.menu.swipeGesture(!1),this.LoginForm=this.fb.group({email:["",[i.l.required,i.l.email]],password:["",[i.l.required]]}),this.removeAllStorageItems()}removeAllStorageItems(){localStorage.removeItem("grocericatoken"),localStorage.removeItem("userDetail"),localStorage.removeItem("user"),localStorage.removeItem("userIdSignUp"),localStorage.removeItem("grocericastart"),localStorage.removeItem("grocericaQuantity"),localStorage.removeItem("grocericaSelectedAddress"),localStorage.removeItem("grocericaforgotEmail"),localStorage.removeItem("userId"),localStorage.removeItem("grocericaProduct"),localStorage.removeItem("reviewProduct"),localStorage.removeItem("viewFeedback"),localStorage.removeItem("grocericaOrderId"),localStorage.removeItem("grocericaViewCart"),localStorage.removeItem("grocericaemail"),localStorage.removeItem("userIdSignUp"),localStorage.removeItem("cartCount")}get f(){return this.LoginForm.controls}login(e){return Object(s.a)(this,void 0,void 0,(function*(){if(this.formValidation=!0,this.LoginForm.invalid)return;const t=this.api.login(e),o=yield this.loadingController.create({message:"Please wait..."});o.present(),t.subscribe(e=>Object(s.a)(this,void 0,void 0,(function*(){yield o.dismiss(),localStorage.setItem("grocericatoken",e.token),localStorage.setItem("grocericastart","starttoken"),localStorage.setItem("grocericaemail",e.email),localStorage.setItem("user",e.fullName),localStorage.setItem("userDetail",JSON.stringify(e)),this.router.navigate(["/home"])})),e=>Object(s.a)(this,void 0,void 0,(function*(){if(yield o.dismiss(),"PENDING"===e.error.message){const t=yield this.loadingController.create({message:"Please wait..."});t.present(),this.api.activateAccount(e.error.userId).subscribe(e=>Object(s.a)(this,void 0,void 0,(function*(){yield t.dismiss(),this.router.navigate(["/activate-otp"])})),e=>{})}400===e.status&&this.alert.presentToast("Invalid Details")})))}))}googleSignIn(){return Object(s.a)(this,void 0,void 0,(function*(){const e=yield this.loadingController.create({message:"Please wait..."});e.present(),this.googlePlus.login({scopes:"profile email phone"}).then(t=>{e.dismiss(),this.socialAccount=JSON.stringify(t),localStorage.setItem("grocericastart","starttoken"),localStorage.setItem("grocericaemail",t.email),localStorage.setItem("user",t.displayName),this.api.loginAsSocial({email:t.email,fullName:t.displayName,userId:t.userId}).subscribe(e=>{localStorage.setItem("grocericatoken",e.token),this.router.navigate(["/home"])},e=>{"PHONE_REQUIRED"==e.error.message?(localStorage.setItem("grocericastart","starttoken"),localStorage.setItem("grocericaemail",t.email),localStorage.setItem("user",t.displayName),localStorage.setItem("grocericatoken",e.error.token),this.router.navigate(["/socialSignUp"])):this.alert.presentToast("Unable to login, please try again")}),this.userData=t}).catch(t=>{e.dismiss(),this.userData="Error "+JSON.stringify(t),this.alert.presentToast("Something went wrong")})}))}ionViewWillEnter(){localStorage.getItem("grocericatoken")&&(this.signupText=!1)}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(i.a),c.Lb(l.a),c.Lb(g.a),c.Lb(b.a),c.Lb(m.a),c.Lb(a.g),c.Lb(d.a),c.Lb(n.N),c.Lb(n.O))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-login"]],decls:51,vars:5,consts:[["src","../../assets/login.png","alt","Connect Bazar",2,"background-color","rgb(6, 15, 66)","object-fit","cover"],[1,"background"],["src","../../assets/icon.png","alt","Connect Bazar",1,"login"],[1,"text"],["expand","block",2,"--background","rgb(155, 0, 0)",3,"click"],["slot","start","src","../../assets/search.svg"],[1,"flex-container"],[3,"formGroup","ngSubmit"],[1,"ion-float-left",2,"border-bottom","1px solid #fff"],["lines","none",2,"background-color","transparent"],["position","fixed",2,"color","#fff"],["formControlName","email"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],[1,"ion-float-right",2,"border-bottom","1px solid #fff"],["lines","none"],["type","password","formControlName","password"],[1,"login-ctr"],["type","ngSubmit",1,"button-submit","des-button",3,"disabled"],["routerLink","/forgotpassord",2,"text-align","start","color","white","margin-left","20px","font-size","15px"],["routerLink","/home",2,"text-align","end","color","white","margin-right","20px","font-size","15px"],[4,"ngIf"],["id","errorStyle",1,"invalid-feedback"],["routerLink","/signup",1,"signup",2,"color","white","font-size","18px"]],template:function(e,t){1&e&&(c.Mb(0,"img",0),c.Rb(1,"ion-content",1),c.Rb(2,"div"),c.Mb(3,"img",2),c.Rb(4,"p",3),c.qc(5,"Welcome to Connect Bazar, "),c.Mb(6,"br"),c.qc(7,"Let's Sign in"),c.Qb(),c.Rb(8,"ion-button",4),c.Zb("click",(function(){return t.googleSignIn()})),c.Mb(9,"ion-icon",5),c.qc(10," LOGIN WITH GOOGLE"),c.Qb(),c.Rb(11,"div",6),c.Mb(12,"br"),c.Mb(13,"br"),c.Mb(14,"br"),c.Rb(15,"span"),c.qc(16,"OR"),c.Qb(),c.Mb(17,"br"),c.Mb(18,"br"),c.Qb(),c.Rb(19,"ion-card"),c.Rb(20,"ion-grid"),c.Rb(21,"form",7),c.Zb("ngSubmit",(function(){return t.login(t.LoginForm.value)})),c.Rb(22,"ion-row"),c.Rb(23,"ion-col",8),c.Rb(24,"div"),c.Rb(25,"ion-item",9),c.Rb(26,"ion-label",10),c.qc(27,"Email"),c.Qb(),c.Mb(28,"ion-input",11),c.Qb(),c.oc(29,p,3,2,"div",12),c.Qb(),c.Qb(),c.Qb(),c.Rb(30,"ion-row"),c.Rb(31,"ion-col",13),c.Rb(32,"div"),c.Rb(33,"ion-item",14),c.Rb(34,"ion-label",10),c.qc(35," Password"),c.Qb(),c.Mb(36,"ion-input",15),c.Qb(),c.oc(37,v,2,1,"div",12),c.Qb(),c.Qb(),c.Qb(),c.Rb(38,"div",16),c.Rb(39,"button",17),c.qc(40," Login"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(41,"ion-row"),c.Rb(42,"ion-col"),c.Rb(43,"p",18),c.Rb(44,"u"),c.qc(45,"Forgot password?"),c.Qb(),c.Qb(),c.Qb(),c.Rb(46,"ion-col"),c.Rb(47,"p",19),c.Rb(48,"u"),c.qc(49," Skip for now >> "),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.oc(50,I,5,0,"ng-container",20),c.Qb()),2&e&&(c.Ab(21),c.ec("formGroup",t.LoginForm),c.Ab(8),c.ec("ngIf",t.formValidation&&t.f.email.errors),c.Ab(8),c.ec("ngIf",t.formValidation&&t.f.password.errors),c.Ab(2),c.ec("disabled",t.LoginForm.invalid),c.Ab(11),c.ec("ngIf",t.signupText))},directives:[n.j,n.e,n.p,n.g,n.n,i.m,i.i,i.c,n.B,n.i,n.r,n.s,n.q,n.U,i.h,i.b,r.k,n.S,a.h],styles:[".background[_ngcontent-%COMP%]{--background:#060f42;margin-top:200px!important}ion-item[_ngcontent-%COMP%]{--background:transparent!important}ion-card[_ngcontent-%COMP%]{align-items:center;height:220px;background:hsla(0,0%,76.9%,.12);border-radius:15px}ion-icon[_ngcontent-%COMP%]{color:#000;font-size:30px}ion-input[_ngcontent-%COMP%]{color:#fff}ion-button[_ngcontent-%COMP%]{width:100%;margin-top:15px;padding-left:5%;padding-right:5%}p[_ngcontent-%COMP%]{color:#000;text-align:center;font-size:14px}.login[_ngcontent-%COMP%]{border-radius:15px;height:100px;margin-top:24px;margin-left:auto;margin-right:auto;display:block}.text[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-style:normal;font-weight:400;font-size:30px;line-height:35px;color:#fff}ion-toolbar[_ngcontent-%COMP%]{--background:transparent;--ion-color-base:transparent!important}u[_ngcontent-%COMP%]{-webkit-text-decoration-color:#fff;text-decoration-color:#fff}@media only screen and (max-width:360px){.text[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-style:normal;font-weight:400;font-size:24px;color:#fff}}.item-highlight[_ngcontent-%COMP%]{border-bottom:1px solid #d3d3d3}.flex-container[_ngcontent-%COMP%]{display:flex;width:90%;margin-left:5%;flex-direction:row;justify-content:center;align-items:center}"]}),e})()}];let w=(()=>{class e{}return e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({factory:function(t){return new(t||e)},imports:[[a.i.forChild(S)],a.i]}),e})();var x=o("w1Tr");let k=(()=>{class e{}return e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({factory:function(t){return new(t||e)},providers:[g.a,d.a],imports:[[r.b,i.d,i.k,n.L,l.b,x.a,w]]}),e})()}}]);