(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{cRhG:function(o,e,t){"use strict";t.r(e),t.d(e,"ProfilePageModule",(function(){return P}));var n=t("ofXK"),i=t("3Pt+"),r=t("TEn/"),b=t("tyNb"),l=t("mrSG"),c=t("fXoL"),s=t("Wdxn"),a=t("4Xmu");function f(o,e){1&o&&c.Nb(0)}function d(o,e){1&o&&c.Nb(0)}function u(o,e){if(1&o){const o=c.Sb();c.Rb(0,"h1"),c.qc(1,"View Your Profile"),c.Qb(),c.Rb(2,"ion-card",14),c.Rb(3,"div",15),c.Rb(4,"p"),c.qc(5),c.Qb(),c.Qb(),c.Rb(6,"ion-list"),c.Rb(7,"ion-item",16),c.Rb(8,"ion-label",17),c.qc(9,"Name: "),c.Rb(10,"span",18),c.qc(11),c.Qb(),c.Qb(),c.Qb(),c.Rb(12,"ion-item",16),c.Rb(13,"ion-label",17),c.qc(14,"DOB: "),c.Rb(15,"span",18),c.qc(16),c.Qb(),c.Qb(),c.Qb(),c.Rb(17,"ion-item",16),c.Rb(18,"ion-label",17),c.qc(19,"Email Id: "),c.Rb(20,"span",18),c.qc(21),c.Qb(),c.Qb(),c.Qb(),c.Rb(22,"ion-item",16),c.Rb(23,"ion-label",17),c.qc(24,"Phone No: "),c.Rb(25,"span",18),c.qc(26),c.Qb(),c.Qb(),c.Qb(),c.Rb(27,"ion-item",16),c.Rb(28,"ion-label",17),c.qc(29,"Gender: "),c.Rb(30,"span",18),c.qc(31),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(32,"ion-fab",19),c.Rb(33,"ion-fab-button",20),c.Zb("click",(function(){return c.lc(o),c.bc().editProfile()})),c.Mb(34,"img",21),c.Qb(),c.Qb()}if(2&o){const o=c.bc();c.Ab(5),c.rc(o.letter),c.Ab(6),c.rc(null==o.user?null:o.user.fullName),c.Ab(5),c.rc(null==o.user?null:o.user.dob),c.Ab(5),c.rc(null==o.user?null:o.user.email),c.Ab(5),c.rc(null==o.user?null:o.user.mobile),c.Ab(5),c.rc(null==o.user?null:o.user.gender)}}function m(o,e){1&o&&(c.Rb(0,"div"),c.qc(1,"*Name is required"),c.Qb())}function p(o,e){if(1&o&&(c.Rb(0,"div",33),c.oc(1,m,2,0,"div",13),c.Qb()),2&o){const o=c.bc(2);c.Ab(1),c.ec("ngIf",o.f.name.errors.required)}}function h(o,e){1&o&&(c.Rb(0,"div",35),c.qc(1," *Dob is required "),c.Qb())}function g(o,e){if(1&o&&(c.Rb(0,"div",33),c.oc(1,h,2,0,"div",34),c.Qb()),2&o){const o=c.bc(2);c.Ab(1),c.ec("ngIf",o.f.dob.errors.required)}}function Q(o,e){if(1&o&&(c.Rb(0,"form",22),c.Rb(1,"h1"),c.qc(2,"Edit Your Profile"),c.Qb(),c.Rb(3,"ion-card",14),c.Rb(4,"div",15),c.Rb(5,"p"),c.qc(6),c.Qb(),c.Qb(),c.Rb(7,"ion-list"),c.Rb(8,"ion-row"),c.Rb(9,"ion-col",23),c.Rb(10,"ion-item",16),c.Rb(11,"ion-label",24),c.qc(12," Name:"),c.Qb(),c.Mb(13,"ion-input",25),c.Qb(),c.oc(14,p,2,1,"div",26),c.Qb(),c.Qb(),c.Rb(15,"ion-row"),c.Rb(16,"ion-col",27),c.Rb(17,"ion-item",16),c.Rb(18,"ion-label",24),c.qc(19," DOB:"),c.Qb(),c.Mb(20,"ion-input",28),c.oc(21,g,2,1,"div",26),c.Qb(),c.Qb(),c.Qb(),c.Rb(22,"ion-row"),c.Rb(23,"ion-col",27),c.Rb(24,"ion-item",16),c.Rb(25,"ion-label",24),c.qc(26," Email Id:"),c.Qb(),c.Rb(27,"span",29),c.qc(28),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(29,"ion-row"),c.Rb(30,"ion-col",27),c.Rb(31,"ion-item",16),c.Rb(32,"ion-label",24),c.qc(33," Phone No:"),c.Qb(),c.Rb(34,"span",29),c.qc(35),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(36,"ion-row"),c.Rb(37,"ion-col",27),c.Rb(38,"ion-item",16),c.Rb(39,"ion-label",24),c.qc(40," Gender"),c.Qb(),c.Rb(41,"ion-select",30),c.Rb(42,"ion-select-option",31),c.qc(43,"Female"),c.Qb(),c.Rb(44,"ion-select-option",32),c.qc(45,"Male"),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&o){const o=c.bc();c.ec("formGroup",o.EditForm),c.Ab(6),c.rc(o.letter),c.Ab(8),c.ec("ngIf",o.checkValid&&o.f.name.errors),c.Ab(7),c.ec("ngIf",o.checkValid&&o.f.dob.errors),c.Ab(7),c.sc(" ",null==o.user?null:o.user.email,""),c.Ab(7),c.rc(null==o.user?null:o.user.mobile)}}function R(o,e){if(1&o){const o=c.Sb();c.Rb(0,"div"),c.Rb(1,"button",36),c.Zb("click",(function(){c.lc(o);const e=c.bc();return e.updateAddress(e.EditForm.value)})),c.qc(2,"Update Profile"),c.Qb(),c.Qb()}}const q=[{path:"",component:(()=>{class o{constructor(o,e,t,n,i,r){this.common=o,this.formBuilder=e,this.datePipe=t,this.loadingController=n,this.api=i,this.router=r,this.showProfile=!0,this.checkValid=!1}ngOnInit(){this.EditForm=this.formBuilder.group({dob:["",[i.l.required]],name:["",[i.l.required]],gender:["",[i.l.required]]})}get f(){return this.EditForm.controls}openModel(){this.common.openModal()}getUserDetails(){this.api.getUserDetails().subscribe(o=>{this.user=o,this.letter=this.user.fullName.slice(0,1);let e=this.datePipe.transform(this.user.dob,"yyyy-MM-dd");this.user.dob=e},o=>{401===o.status&&(this.common.presentToast("Session expired, please login again"),this.router.navigate(["/login"]))})}editProfile(){this.showProfile=!1,this.EditForm.controls.name.setValue(this.user.fullName),this.EditForm.controls.dob.setValue(this.datePipe.transform(this.user.dob,"yyyy-MM-dd")),this.EditForm.controls.gender.setValue(this.user.gender)}updateAddress(o){return Object(l.a)(this,void 0,void 0,(function*(){if(o.userId=this.user.userId,o.email=this.user.email,o.mobile=this.user.mobile,this.checkValid=!0,this.EditForm.invalid)return;const e=yield this.loadingController.create({message:"Updating..."});e.present(),this.api.updateProfile(o).subscribe(o=>{o&&(e.dismiss(),this.common.presentToast("Profile is updated"),this.showProfile=!0,this.getUserDetails())},o=>{e.dismiss(),this.common.presentToast("Something went wrong? Try Again")})}))}ionViewWillEnter(){this.quantity=localStorage.getItem("grocericaQuantity"),this.getUserDetails()}}return o.\u0275fac=function(e){return new(e||o)(c.Lb(s.a),c.Lb(i.a),c.Lb(n.d),c.Lb(r.N),c.Lb(a.a),c.Lb(b.g))},o.\u0275cmp=c.Fb({type:o,selectors:[["app-profile"]],decls:21,vars:6,consts:[["color","primary"],["slot","start"],["name","arrow-back","routerLink","/home"],["slot","end","tab","search"],[3,"click"],["name","search",1,"search-icon"],["routerLink","/cart",2,"margin-left","6px","position","relative"],["name","cart",2,"font-size","24px"],["slot","end",2,"border-radius","50%"],[1,"appBackground"],[4,"ngIf","ngIfThen"],["show",""],["editForm",""],[4,"ngIf"],[2,"margin-top","25px"],[1,"nameCol"],["lines","none"],[2,"color","#fff","font-size","20px","font-family","OpenSans-Light"],[2,"font-weight","bolder"],["vertical","bottom","horizontal","end","slot","fixed"],[1,"des-button",2,"border-radius","40px",3,"click"],["src","../../assets/edit.png",2,"color","white","font-weight","bold"],[3,"formGroup"],[1,"ion-float-right",2,"border-bottom","1px solid #fff"],["position","fixed",2,"color","#fff"],["type","text","formControlName","name"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],[2,"border-bottom","1px solid #fff"],["type","text","formControlName","dob"],[2,"font-weight","bolder","color","#fff"],["placeholder","Select","formControlName","gender",2,"color","#fff","position","absolute","right","10px"],["value","female",2,"color","#fff"],["value","male",2,"color","#fff"],["id","errorStyle",1,"invalid-feedback"],["style","color: red;",4,"ngIf"],[2,"color","red"],["type","ngSubmit",1,"updateButton",3,"click"]],template:function(o,e){if(1&o&&(c.Rb(0,"ion-header"),c.Rb(1,"ion-toolbar",0),c.Rb(2,"ion-buttons",1),c.Mb(3,"ion-icon",2),c.Qb(),c.Rb(4,"ion-title"),c.qc(5,"Profile"),c.Qb(),c.Rb(6,"ion-buttons",3),c.Rb(7,"ion-button",4),c.Zb("click",(function(){return e.openModel()})),c.Mb(8,"ion-icon",5),c.Qb(),c.Rb(9,"ion-button",6),c.Mb(10,"ion-icon",7),c.Rb(11,"ion-badge",8),c.qc(12),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(13,"ion-content",9),c.oc(14,f,1,0,"ng-container",10),c.oc(15,d,1,0,"ng-container",10),c.oc(16,u,35,6,"ng-template",null,11,c.pc),c.oc(18,Q,46,6,"ng-template",null,12,c.pc),c.Qb(),c.oc(20,R,3,0,"div",13)),2&o){const o=c.kc(17),t=c.kc(19);c.Ab(12),c.rc(e.quantity),c.Ab(2),c.ec("ngIf",e.showProfile)("ngIfThen",o),c.Ab(1),c.ec("ngIf",!e.showProfile)("ngIfThen",t),c.Ab(5),c.ec("ngIf",!e.showProfile)}},directives:[r.o,r.K,r.f,r.p,r.S,b.h,r.J,r.e,r.d,r.j,n.k,r.g,r.t,r.r,r.s,r.l,r.m,i.m,i.i,i.c,r.B,r.i,r.q,r.U,i.h,i.b,r.D,r.T,r.E],styles:["h1[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-style:normal;font-weight:700;font-size:26px;line-height:30px;text-align:center;color:#fff}.nameCol[_ngcontent-%COMP%]{height:113px;width:121px;background:radial-gradient(50% 50% at 50% 50%,#227c98 0,rgba(70,211,255,0) 100%);display:block;margin-left:auto;margin-right:auto}p[_ngcontent-%COMP%]{text-align:center;padding:21px;font-size:50px;color:#fff;font-weight:bolder}ion-list[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin-top:20px}ion-list[_ngcontent-%COMP%]{background-color:transparent}ion-item[_ngcontent-%COMP%]{--background:transparent!important;background-color:transparent;--border-color:#fff;height:70px}img[_ngcontent-%COMP%]{color:#fff;height:40px}.updateButton[_ngcontent-%COMP%]{width:100%;height:50px;font-size:20px;font-family:OpenSans-Light;color:#fff;font-weight:700;background-color:#6b00c2}ion-input[_ngcontent-%COMP%]{color:#fff}"]}),o})()}];let w=(()=>{class o{}return o.\u0275mod=c.Jb({type:o}),o.\u0275inj=c.Ib({factory:function(e){return new(e||o)},imports:[[b.i.forChild(q)],b.i]}),o})();var y=t("tk/3");let P=(()=>{class o{}return o.\u0275mod=c.Jb({type:o}),o.\u0275inj=c.Ib({factory:function(e){return new(e||o)},providers:[s.a,a.a,n.d],imports:[[n.b,i.d,r.L,y.b,i.k,w]]}),o})()}}]);