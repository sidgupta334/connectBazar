(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{RdcS:function(t,o,r){"use strict";r.r(o),r.d(o,"ForgotpassordPageModule",(function(){return O}));var e=r("ofXK"),i=r("TEn/"),n=r("tk/3"),s=r("tyNb"),a=r("mrSG"),c=r("3Pt+"),b=r("fXoL"),l=r("XNvx"),d=r("Wdxn");function f(t,o){1&t&&b.Nb(0)}function u(t,o){1&t&&b.Nb(0)}function m(t,o){1&t&&(b.Rb(0,"div"),b.qc(1,"*Email is required"),b.Qb())}function p(t,o){1&t&&(b.Rb(0,"div"),b.qc(1,"Enter valid *email"),b.Qb())}function g(t,o){if(1&t&&(b.Rb(0,"div",14),b.oc(1,m,2,0,"div",15),b.oc(2,p,2,0,"div",15),b.Qb()),2&t){const t=b.bc(2);b.Ab(1),b.ec("ngIf",t.f.Email.errors.required),b.Ab(1),b.ec("ngIf",t.f.Email.errors.email)}}function h(t,o){if(1&t){const t=b.Sb();b.Rb(0,"ion-toolbar"),b.Rb(1,"ion-buttons",4),b.Mb(2,"ion-icon",5),b.Qb(),b.Qb(),b.Rb(3,"ion-grid"),b.Rb(4,"p",6),b.qc(5,"Forgot your password? "),b.Mb(6,"br"),b.qc(7," Let's recover it"),b.Qb(),b.Rb(8,"ion-card"),b.Rb(9,"form",7),b.Zb("ngSubmit",(function(){b.lc(t);const o=b.bc();return o.getEmail(o.EmailForm.value)})),b.Rb(10,"ion-row"),b.Rb(11,"ion-col",8),b.Rb(12,"div"),b.Rb(13,"ion-item",9),b.Rb(14,"ion-label",10),b.qc(15," Email "),b.Qb(),b.Mb(16,"ion-input",11),b.Qb(),b.oc(17,g,3,2,"div",12),b.Qb(),b.Qb(),b.Rb(18,"button",13),b.qc(19," Send OTP"),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Qb()}if(2&t){const t=b.bc();b.Ab(9),b.ec("formGroup",t.EmailForm),b.Ab(8),b.ec("ngIf",t.checkValid&&t.f.Email.errors)}}function w(t,o){1&t&&(b.Rb(0,"div"),b.qc(1,"*Otp is required"),b.Qb())}function v(t,o){if(1&t&&(b.Rb(0,"div",14),b.oc(1,w,2,0,"div",15),b.Qb()),2&t){const t=b.bc(2);b.Ab(1),b.ec("ngIf",t.frmValid.otp.errors.required)}}function R(t,o){1&t&&(b.Rb(0,"div"),b.qc(1,"*Password is required"),b.Qb())}function Q(t,o){if(1&t&&(b.Rb(0,"div",14),b.oc(1,R,2,0,"div",15),b.Qb()),2&t){const t=b.bc(2);b.Ab(1),b.ec("ngIf",t.frmValid.newPassword.errors.required)}}function P(t,o){if(1&t){const t=b.Sb();b.Rb(0,"ion-toolbar"),b.Rb(1,"ion-buttons",16),b.Zb("click",(function(){return b.lc(t),b.bc().route()})),b.Mb(2,"ion-icon",17),b.Qb(),b.Qb(),b.Rb(3,"ion-grid"),b.Rb(4,"p",6),b.qc(5,"Forgot your password? "),b.Mb(6,"br"),b.qc(7," Let's recover it"),b.Qb(),b.Rb(8,"ion-card"),b.Rb(9,"form",7),b.Zb("ngSubmit",(function(){b.lc(t);const o=b.bc();return o.postOtp(o.OtpForm.value)})),b.Rb(10,"ion-row"),b.Rb(11,"ion-col",8),b.Rb(12,"div"),b.Rb(13,"ion-item",18),b.Rb(14,"ion-label",10),b.qc(15," OTP"),b.Qb(),b.Mb(16,"ion-input",19),b.Qb(),b.oc(17,v,2,1,"div",12),b.Rb(18,"ion-item",18),b.Rb(19,"ion-label",10),b.qc(20," New Password"),b.Qb(),b.Mb(21,"ion-input",20),b.Qb(),b.oc(22,Q,2,1,"div",12),b.Qb(),b.Qb(),b.Rb(23,"button",13),b.qc(24," Update Password"),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Qb()}if(2&t){const t=b.bc();b.Ab(9),b.ec("formGroup",t.OtpForm),b.Ab(8),b.ec("ngIf",t.otpFormValid&&t.frmValid.otp.errors),b.Ab(5),b.ec("ngIf",t.otpFormValid&&t.frmValid.newPassword.errors)}}const y=[{path:"",component:(()=>{class t{constructor(t,o,r,e,i,n,s,a){this.fb=t,this.http=o,this.api=r,this.loadingController=e,this.alertController=i,this.router=n,this.alert=s,this.menu=a,this.checkValid=!1,this.otpFormValid=!1,this.otpPost=!1,this.forgotPassword=!0}ngOnInit(){this.menu.swipeGesture(!1),this.EmailForm=this.fb.group({Email:["",[c.l.required,c.l.email]]}),this.OtpForm=this.fb.group({otp:["",[c.l.required]],newPassword:["",[c.l.required]]})}get f(){return this.EmailForm.controls}get frmValid(){return this.OtpForm.controls}route(){this.otpPost=!1,this.forgotPassword=!0}getEmail(t){return Object(a.a)(this,void 0,void 0,(function*(){if(this.checkValid=!0,this.EmailForm.invalid)return;const o=yield this.loadingController.create({message:"Please wait..."});o.present(),this.api.forgotPassword(t.Email).subscribe(r=>{localStorage.setItem("grocericaforgotEmail",t.Email),o.dismiss(),this.alert.presentToast("Otp Sent Successfully to your email"),this.forgotPassword=!1,this.otpPost=!0,this.otpFormValid=!1},t=>{o.dismiss(),"User not found"===t.error.message&&400===t.status&&this.alert.presentToast(t.error.message),500===t.status&&this.alert.presentToast("Something went wrong")})}))}postOtp(t){return Object(a.a)(this,void 0,void 0,(function*(){if(this.otpFormValid=!0,this.OtpForm.invalid)return;t.email=localStorage.getItem("grocericaforgotEmail");const o=yield this.loadingController.create({message:"Please wait..."});o.present(),this.api.postOtp(t).subscribe(t=>{o.dismiss(),this.presentAlertConfirm(t.message)},t=>{o.dismiss(),"User not found"===t.error.message&&400===t.status&&this.alert.presentToast(t.error.message),"OTP doesn't matched"===t.error.message&&500===t.status&&this.alert.presentToast(t.error.message)})}))}presentAlertConfirm(t){return Object(a.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({cssClass:"my-custom-class",header:t,message:"Login to your Account",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Okay",handler:()=>{this.router.navigate(["login"])}}]});yield o.present()}))}}return t.\u0275fac=function(o){return new(o||t)(b.Lb(c.a),b.Lb(n.a),b.Lb(l.a),b.Lb(i.N),b.Lb(i.a),b.Lb(s.g),b.Lb(d.a),b.Lb(i.O))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-forgotpassord"]],decls:7,vars:4,consts:[[1,"background",2,"background-color","rgb(6, 15, 66)"],[4,"ngIf","ngIfThen"],["forgotEmailForm",""],["otpEnterForm",""],["slot","start"],["name","arrow-back","routerLink","/login"],[1,"text"],[1,"ion-padding",3,"formGroup","ngSubmit"],[1,"ion-float-right"],["lines","none",2,"background-color","transparent"],["position","fixed",2,"color","#fff"],["type","text","formControlName","Email",2,"color","#fff","margin-left","-15px"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],["type","ngSubmit",1,"button-submit","des-button"],["id","errorStyle",1,"invalid-feedback"],[4,"ngIf"],["slot","start",3,"click"],["name","arrow-back"],["lines","none",1,"input-password"],["type","text","formControlName","otp",2,"color","#fff"],["type","password","formControlName","newPassword",2,"color","#fff"]],template:function(t,o){if(1&t&&(b.Rb(0,"ion-content",0),b.oc(1,f,1,0,"ng-container",1),b.oc(2,u,1,0,"ng-container",1),b.oc(3,h,20,2,"ng-template",null,2,b.pc),b.oc(5,P,25,3,"ng-template",null,3,b.pc),b.Qb()),2&t){const t=b.kc(4),r=b.kc(6);b.Ab(1),b.ec("ngIf",o.forgotPassword)("ngIfThen",t),b.Ab(1),b.ec("ngIf",o.otpPost)("ngIfThen",r)}},directives:[i.j,e.k,i.K,i.f,i.p,i.S,s.h,i.n,i.g,c.m,c.i,c.c,i.B,i.i,i.r,i.s,i.q,i.U,c.h,c.b],styles:[".text[_ngcontent-%COMP%]{color:#fff;text-align:center;font-size:30px;margin-top:44%}.input-password[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{flex:0 0 130px}ion-input[_ngcontent-%COMP%]{color:#fff}"]}),t})()}];let q=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(o){return new(o||t)},imports:[[s.i.forChild(y)],s.i]}),t})(),O=(()=>{class t{}return t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({factory:function(o){return new(o||t)},providers:[l.a],imports:[[e.b,c.d,c.k,n.b,i.L,q]]}),t})()}}]);