(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{uZhx:function(e,t,o){"use strict";o.r(t),o.d(t,"ChooseAddressPageModule",(function(){return C}));var n=o("ofXK"),s=o("3Pt+"),r=o("TEn/"),i=o("Bg0J"),c=o("tyNb"),a=o("mrSG"),l=o("Af+r"),d=o("fXoL"),b=o("Wdxn"),g=o("Nagw"),h=o("Bl/W"),p=o("59dN"),u=o("4Xmu");function f(e,t){1&e&&(d.Pb(0,"h1"),d.nc(1,"Choose your delivery address"),d.Ob())}function m(e,t){1&e&&(d.Pb(0,"div",21),d.Kb(1,"img",22),d.Kb(2,"br"),d.Kb(3,"br"),d.Pb(4,"h6",23),d.nc(5," Looks like you don't have any address mapped, let's add new one."),d.Ob(),d.Ob())}const O=function(e,t){return{back2:e,back1:t}};function P(e,t){if(1&e){const e=d.Qb();d.Pb(0,"ion-card",24),d.Xb("click",(function(){d.ic(e);const o=t.$implicit;return d.Zb().onSelect(o)})),d.Pb(1,"ion-row"),d.Pb(2,"ion-col",25),d.nc(3),d.Ob(),d.Ob(),d.Pb(4,"ion-row",26),d.Pb(5,"ion-col",27),d.nc(6," Address: "),d.Ob(),d.Pb(7,"ion-col",28),d.nc(8),d.Ob(),d.Ob(),d.Pb(9,"ion-row",29),d.Pb(10,"ion-col",30),d.nc(11,"Pincode:"),d.Pb(12,"span",28),d.nc(13),d.Ob(),d.Ob(),d.Kb(14,"ion-col",31),d.Pb(15,"ion-col",30),d.nc(16,"City: "),d.Pb(17,"span",28),d.nc(18),d.Ob(),d.Ob(),d.Ob(),d.Pb(19,"ion-row",29),d.Pb(20,"ion-col",30),d.nc(21,"State:"),d.Pb(22,"span",28),d.nc(23),d.Ob(),d.Ob(),d.Kb(24,"ion-col",31),d.Pb(25,"ion-col",30),d.nc(26," Country:"),d.Pb(27,"span",28),d.nc(28),d.Ob(),d.Ob(),d.Ob(),d.Pb(29,"div",32),d.Pb(30,"p"),d.nc(31),d.Ob(),d.Ob(),d.Ob()}if(2&e){const e=t.$implicit;d.cc("ngClass",d.fc(9,O,1==e.selected,0==e.selected)),d.zb(3),d.pc(" ADDRESS TYPE: ",e.title," "),d.zb(5),d.qc(" ",e.address1," ",e.address2," "),d.zb(5),d.oc(e.pincode),d.zb(5),d.oc(e.city),d.zb(5),d.oc(e.state),d.zb(5),d.oc(e.country),d.zb(3),d.pc("Mobile:",e.mobile,"")}}const x=[{path:"",component:(()=>{class e{constructor(e,t,o,n,s,r,i,c,a,l,d){this.common=e,this.cartApi=t,this.api=o,this.loadingController=n,this.router=s,this.webIntent=r,this.userInfor=i,this.datePipe=c,this.localNotifications=a,this.platform=l,this.modalController=d,this.contactLess=!1,this.todaysDate=new Date,this.checkSelectAddress=!1,console.log(this.todaysDate),this.convertDate=this.datePipe.transform(this.todaysDate,"yyyyMMddHHmmss"),console.log(this.convertDate),this.platform.ready().then(()=>{this.localNotifications.on("trigger").subscribe(e=>{console.log("trigger",e)})})}ngOnInit(){localStorage.getItem("updatedprice")?(console.log("coupon is applied"),this.cartValue=localStorage.getItem("updatedprice")):this.cartApi.viewCart().subscribe(e=>{this.cartValue=e.netTotal,console.log(e),console.log("cartvalue",this.cartValue)}),this.userInfor.getUserDetails().subscribe(e=>{this.userDetail=e,console.log("user details",this.userDetail.mobile)})}openModel(){this.common.openModal()}ionViewWillEnter(){this.quantity=localStorage.getItem("grocericaQuantity"),this.getAddress()}getAddress(){this.api.getAddress().subscribe(e=>{console.log(e),this.address=e;for(let t=0;t<this.address.length;t++)this.address[t].selected=!1})}openModalPage(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:l.a,componentProps:{selector:"CHOOSE"}});return e.onDidDismiss().then(e=>{console.log(e),this.getAddress()}),yield e.present()}))}onSelect(e){console.log(e);for(let t=0;t<this.address.length;t++)if(this.address[t].selected=!1,this.address[t].addressId==e.addressId){this.address[t].selected=!0,this.checkSelectAddress=!0,localStorage.setItem("grocericaSelectedAddress",JSON.stringify(this.address[t]));const e=JSON.parse(localStorage.getItem("grocericaSelectedAddress"));console.log("order address"+e.addressId),this.orderAddress=e.addressId,this.verifyPincode=e,console.log("verify PIN",this.verifyPincode.pincode)}}verifyEvent(e){console.log(e),this.contactLess=e.detail.checked,console.log(this.contactLess)}verifyPin(e){return Object(a.a)(this,void 0,void 0,(function*(){console.log("verify pin "+e),0!=this.checkSelectAddress?this.cartApi.verifyPincode(this.verifyPincode.pincode).subscribe(t=>{console.log(t),"COD"==e?(this.codOrder("COD"),console.log("condition"+e)):this.upiOrder("UPI")},e=>{if(console.log(e),500===e.status)return console.log("i am error"),void this.common.presentToast("Currently we dont accept order in this area")}):this.common.presentToast("Please select address to place order")}))}codOrder(e){return Object(a.a)(this,void 0,void 0,(function*(){if(console.log("codOrder"+e),console.log("order value "+this.cartValue),this.cartValue<200)return void this.common.presentToast(" Minimum amount \u20b9200 is required to continue");console.log("order value.more than 2000 ");const t=yield this.loadingController.create({message:"Please wait..."}),o=localStorage.getItem("couponCode"),n=this.cartApi.placeOrder(this.orderAddress,this.cartValue,this.contactLess,e,o);console.log(this.orderAddress),t.present(),n.subscribe(e=>{console.log(e),console.log("order when placed response",e[0].orderId),localStorage.setItem("grocericaOrderId",e[0].orderId),localStorage.removeItem("updatedprice"),localStorage.removeItem("grocericaCategory"),localStorage.removeItem("couponCode"),t.dismiss(),this.common.presentToast("Order Successfully Placed"),this.common.scheduleNotification(e),this.router.navigate(["/order-placed",e[0].orderId])},e=>{t.dismiss(),500==e.status&&this.common.presentToast("Please Select Address"),this.common.presentToast("Something went wrong"),console.log(e)})}))}upiOrder(e){console.log("upiOrder"+e),this.convertDate=this.convertDate+this.userDetail.mobile+this.userDetail.userId,console.log(this.convertDate);const t={action:this.webIntent.ACTION_VIEW,url:"upi://pay?pa=8999090358@ybl&pn=Connect Bazar&tid="+this.convertDate+"&tr=orderPayment&am=1&cu=INR&tn=ConnectBazar"};console.log(t.url),this.webIntent.startActivityForResult(t).then(t=>{console.log(t),"Success"!=t.extras.Status&&"SUCCESS"!=t.extras.Status||(console.log("sending from upi to cod"+e),this.codOrder(e))},e=>{console.log(e),alert("error")})}}return e.\u0275fac=function(t){return new(t||e)(d.Jb(b.a),d.Jb(g.a),d.Jb(h.a),d.Jb(r.N),d.Jb(c.g),d.Jb(p.a),d.Jb(u.a),d.Jb(n.d),d.Jb(i.a),d.Jb(r.R),d.Jb(r.P))},e.\u0275cmp=d.Db({type:e,selectors:[["app-choose-address"]],decls:28,vars:4,consts:[["color","primary",2,"height","60px"],["slot","start"],["name","arrow-back","routerLink","/home"],["slot","end","tab","search"],[2,"margin-top","13px",3,"click"],["name","search",1,"search-icon"],["routerLink","/cart",2,"margin-left","6px","margin-top","13px","position","relative"],["name","cart",2,"font-size","38px"],["slot","end",2,"border-radius","50%"],[1,"appBackground"],[4,"ngIf"],["class","flex-head",4,"ngIf"],["style","margin-top: 15px",3,"ngClass","click",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],[1,"des-button",2,"border-radius","40px",3,"click"],["name","add",2,"color","white","font-weight","bold","font-size","30px"],[1,"cart-background",2,"padding-left","20px","height","80px"],[3,"ionChange"],[2,"color","#fff","font-family","OpenSans-Light","font-weight","bold","font-size","20px","margin-left","10px"],[1,"cart-background"],[1,"placeorder","des-button",3,"click"],[1,"flex-head"],["src","../../assets/not-found.png","alt","not found","width","40%"],[2,"margin","0 10px","text-align","center"],[2,"margin-top","15px",3,"ngClass","click"],[1,"AddressTYpe"],[2,"margin-top","5px"],["size","3",1,"Address"],[1,"AddressValue"],[2,"margin-top","0px"],["id","align",1,"Address"],["size","3"],[1,"mob"]],template:function(e,t){1&e&&(d.Pb(0,"ion-header"),d.Pb(1,"ion-toolbar",0),d.Pb(2,"ion-buttons",1),d.Kb(3,"ion-icon",2),d.Ob(),d.Kb(4,"ion-title"),d.Pb(5,"ion-buttons",3),d.Pb(6,"ion-button",4),d.Xb("click",(function(){return t.openModel()})),d.Kb(7,"ion-icon",5),d.Ob(),d.Pb(8,"ion-button",6),d.Kb(9,"ion-icon",7),d.Pb(10,"ion-badge",8),d.nc(11),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(12,"ion-content",9),d.lc(13,f,2,0,"h1",10),d.lc(14,m,6,0,"div",11),d.lc(15,P,32,12,"ion-card",12),d.Pb(16,"ion-fab",13),d.Pb(17,"ion-fab-button",14),d.Xb("click",(function(){return t.openModalPage()})),d.Kb(18,"ion-icon",15),d.Ob(),d.Ob(),d.Ob(),d.Pb(19,"div",16),d.Kb(20,"br"),d.Pb(21,"ion-checkbox",17),d.Xb("ionChange",(function(e){return t.verifyEvent(e)})),d.Ob(),d.Pb(22,"ion-label",18),d.nc(23,"Opt for Contactless Delivery"),d.Ob(),d.Ob(),d.Pb(24,"ion-row",19),d.Pb(25,"ion-col"),d.Pb(26,"button",20),d.Xb("click",(function(){return t.verifyPin("COD")})),d.nc(27,"Confirm Order"),d.Ob(),d.Ob(),d.Ob()),2&e&&(d.zb(11),d.oc(t.quantity),d.zb(2),d.cc("ngIf",(null==t.address?null:t.address.length)>0),d.zb(1),d.cc("ngIf",0==(null==t.address?null:t.address.length)),d.zb(1),d.cc("ngForOf",t.address))},directives:[r.o,r.K,r.f,r.p,r.S,c.h,r.J,r.e,r.d,r.j,n.k,n.j,r.l,r.m,r.h,r.b,r.s,r.B,r.i,r.g,n.i],styles:["h1[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-size:29px;line-height:30px;text-align:center;color:#fff}.AddressTYpe[_ngcontent-%COMP%]{border-bottom:1px solid #fff;font-weight:700;text-align:center}.Address[_ngcontent-%COMP%], .AddressTYpe[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-style:normal;font-size:16px;color:#fff}.Address[_ngcontent-%COMP%], .AddressValue[_ngcontent-%COMP%]{text-align:left}.AddressValue[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-weight:bolder;font-size:14px;color:#fff;padding-left:1px;padding-right:1px}#align[_ngcontent-%COMP%]{float:left;text-align:left}.mob[_ngcontent-%COMP%]{font-family:OpenSans-Light;font-style:normal;font-size:16px;text-align:center;color:#fff;margin-top:10px;border-top:1px solid #fff}.fab[_ngcontent-%COMP%]{border-radius:50%;height:40px;width:36px;background:#45ae20}#back[_ngcontent-%COMP%]{background:#d24444}ion-fab-button[_ngcontent-%COMP%]{height:50px;width:54px}.back1[_ngcontent-%COMP%]{background:#1f2238;border-radius:10px;box-shadow:1px 5px 14px 0 rgba(0,1,0,.8)}.back2[_ngcontent-%COMP%]{background:#07556d}.bottom[_ngcontent-%COMP%]{background:#1f2238;border-radius:10px;box-shadow:1px 5px 14px 0 rgba(0,1,0,.8)}.placeorder[_ngcontent-%COMP%]{height:48px;font-family:OpenSans-Light;font-size:20px;text-align:center;margin-left:5%;width:90%;border-radius:9px;color:#fff;background-color:#6b00c2}.flex-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;height:100%}"]}),e})()}];let y=(()=>{class e{}return e.\u0275mod=d.Hb({type:e}),e.\u0275inj=d.Gb({factory:function(t){return new(t||e)},imports:[[c.i.forChild(x)],c.i]}),e})();var v=o("tk/3");let C=(()=>{class e{}return e.\u0275mod=d.Hb({type:e}),e.\u0275inj=d.Gb({factory:function(t){return new(t||e)},providers:[b.a,u.a,g.a,p.a,n.d,i.a,h.a],imports:[[n.b,s.d,r.L,s.k,v.b,y]]}),e})()}}]);