function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(d){i=!0,o=d}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"Af+r":function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n("mrSG"),i=n("3Pt+"),o=n("fXoL"),s=n("TEn/"),a=n("Bl/W"),d=n("Bfh1"),c=n("Wdxn"),b=n("tyNb"),l=n("h+qT"),u=n("ofXK"),f=["map"];function g(e,t){1&e&&(o.Rb(0,"div"),o.qc(1,"*title is required"),o.Qb())}function p(e,t){if(1&e&&(o.Rb(0,"div",24),o.oc(1,g,2,0,"div",23),o.Qb()),2&e){var n=o.bc();o.Ab(1),o.ec("ngIf",n.f.title.errors.required)}}function h(e,t){1&e&&(o.Rb(0,"div"),o.qc(1,"*Mobile no is required"),o.Qb())}function m(e,t){1&e&&(o.Rb(0,"div"),o.qc(1,"Enter valid *Mobile No"),o.Qb())}function v(e,t){if(1&e&&(o.Rb(0,"div",24),o.oc(1,h,2,0,"div",23),o.oc(2,m,2,0,"div",23),o.Qb()),2&e){var n=o.bc();o.Ab(1),o.ec("ngIf",n.f.mobile.errors.required),o.Ab(1),o.ec("ngIf",n.f.mobile.errors.pattern)}}function y(e,t){1&e&&(o.Rb(0,"div"),o.qc(1,"*Address is required"),o.Qb())}function A(e,t){if(1&e&&(o.Rb(0,"div",24),o.oc(1,y,2,0,"div",23),o.Qb()),2&e){var n=o.bc();o.Ab(1),o.ec("ngIf",n.f.address1.errors.required)}}function R(e,t){1&e&&(o.Rb(0,"div"),o.qc(1,"*Landmark is required"),o.Qb())}function Q(e,t){if(1&e&&(o.Rb(0,"div",24),o.oc(1,R,2,0,"div",23),o.Qb()),2&e){var n=o.bc();o.Ab(1),o.ec("ngIf",n.f.address2.errors.required)}}function C(e,t){1&e&&(o.Rb(0,"div"),o.qc(1,"*City is required"),o.Qb())}function M(e,t){if(1&e&&(o.Rb(0,"div",24),o.oc(1,C,2,0,"div",23),o.Qb()),2&e){var n=o.bc();o.Ab(1),o.ec("ngIf",n.f.city.errors.required)}}function k(e,t){1&e&&(o.Rb(0,"div"),o.qc(1,"*Pincode is required"),o.Qb())}function w(e,t){1&e&&(o.Rb(0,"div"),o.qc(1,"Enter valid *Pincode"),o.Qb())}function q(e,t){if(1&e&&(o.Rb(0,"div",24),o.oc(1,k,2,0,"div",23),o.oc(2,w,2,0,"div",23),o.Qb()),2&e){var n=o.bc();o.Ab(1),o.ec("ngIf",n.f.pincode.errors.required),o.Ab(1),o.ec("ngIf",n.f.pincode.errors.pattern)}}function x(e,t){1&e&&(o.Rb(0,"div"),o.qc(1,"*state is required"),o.Qb())}function I(e,t){if(1&e&&(o.Rb(0,"div",24),o.oc(1,x,2,0,"div",23),o.Qb()),2&e){var n=o.bc();o.Ab(1),o.ec("ngIf",n.f.state.errors.required)}}function O(e,t){1&e&&(o.Rb(0,"div"),o.qc(1,"*Country is required"),o.Qb())}function _(e,t){if(1&e&&(o.Rb(0,"div",24),o.oc(1,O,2,0,"div",23),o.Qb()),2&e){var n=o.bc();o.Ab(1),o.ec("ngIf",n.f.country.errors.required)}}function T(e,t){if(1&e){var n=o.Sb();o.Pb(0),o.Rb(1,"div",25),o.qc(2," Note: Its mandatory to choose your address from Map to register your address as it will help us to make your delivery experience better. "),o.Qb(),o.Rb(3,"ion-button",26),o.Zb("click",(function(){return o.lc(n),o.bc().loadMap()})),o.qc(4,"Add Address From Map"),o.Qb(),o.Ob()}if(2&e){var r=o.bc();o.Ab(3),o.ec("disabled",r.AddressForm.invalid)}}function P(e,t){1&e&&(o.Pb(0),o.Rb(1,"div",27),o.Rb(2,"div",28),o.Mb(3,"img",29),o.Qb(),o.Mb(4,"div",30,31),o.Qb(),o.Ob())}function S(e,t){if(1&e){var n=o.Sb();o.Rb(0,"div"),o.Rb(1,"button",32),o.Zb("click",(function(){o.lc(n);var e=o.bc(2);return e.registerAddress(e.AddressForm.value)})),o.qc(2," Save Address "),o.Qb(),o.Qb()}}function L(e,t){if(1&e){var n=o.Sb();o.Rb(0,"div"),o.Rb(1,"button",32),o.Zb("click",(function(){o.lc(n);var e=o.bc(2);return e.updateAddress(e.AddressForm.value)})),o.qc(2," Update Address "),o.Qb(),o.Qb()}}function F(e,t){if(1&e&&(o.Pb(0),o.oc(1,S,3,0,"div",23),o.oc(2,L,3,0,"div",23),o.Ob()),2&e){var n=o.bc();o.Ab(1),o.ec("ngIf",n.showAddForm),o.Ab(1),o.ec("ngIf",n.showEditForm)}}var E=function(){var e=function(){function e(t,n,r,i,o,s,a,d,c){_classCallCheck(this,e),this.viewCtrl=t,this.formBuilder=n,this.api=r,this.geolocation=i,this.loadingController=o,this.alert=s,this.router=a,this.nativeGeocoder=c,this.checkValid=!1,this.showAddForm=!0,this.mapButton=!0,this.showMap=!1,this.editAddress=d.get("item"),this.selecAddress=d.get("selector"),this.editAddress&&this.editTheAddress(this.editAddress)}return _createClass(e,[{key:"ngOnInit",value:function(){this.AddressForm=this.formBuilder.group({title:["",[i.l.required]],address1:["",[i.l.required]],address2:[""],mobile:["",[i.l.pattern(/^[6-9]\d{9}$/),i.l.minLength(10),i.l.required]],city:["",[i.l.required]],country:["",[i.l.required]],pincode:["",[i.l.required,i.l.pattern(/^[1-9][0-9]{5}$/)]],state:["",[i.l.required]]})}},{key:"dismiss",value:function(){this.viewCtrl.dismiss()}},{key:"numberOnlyValidation",value:function(e){var t=String.fromCharCode(e.charCode);/[0-9.,]/.test(t)||e.preventDefault()}},{key:"loadMap",value:function(){var e=this;this.mapButton=!1,this.showMap=!0,this.geolocation.getCurrentPosition().then((function(t){e.latitude=t.coords.latitude,e.longitude=t.coords.longitude;var n={center:new google.maps.LatLng(t.coords.latitude,t.coords.longitude),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};e.getAddressFromCoords(t.coords.latitude,t.coords.longitude),e.map=new google.maps.Map(e.mapElement.nativeElement,n),e.map.addListener("dragend",(function(){e.latitude=e.map.center.lat(),e.longitude=e.map.center.lng(),e.getAddressFromCoords(e.map.center.lat(),e.map.center.lng())}))})).catch((function(e){}))}},{key:"getAddressFromCoords",value:function(e,t){var n=this;this.nativeGeocoder.reverseGeocode(e,t,{useLocale:!0,maxResults:2}).then((function(e){n.city=e[1].locality,n.country=e[1].countryName,n.pincode=e[1].postalCode,n.state=e[1].administrativeArea,n.address="";for(var t=[],r=0,i=Object.entries(e[0]);r<i.length;r++){var o=_slicedToArray(i[r],2),s=(o[0],o[1]);s.length>0&&t.push(s)}t.reverse();for(var a=0,d=t;a<d.length;a++){var c=d[a];n.address+=c+", "}n.address=n.address.slice(0,-2)})).catch((function(e){n.address="Address Not Available!"}))}},{key:"registerAddress",value:function(e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkValid=!0,!this.AddressForm.invalid){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.loadingController.create({message:"Please wait..."});case 4:(n=t.sent).present(),e.lattitude=JSON.stringify(this.latitude),e.longitude=JSON.stringify(this.longitude),this.api.registerAddress(e).subscribe((function(e){return Object(r.a)(i,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.dismiss();case 2:"CHOOSE"==this.selecAddress?(this.router.navigate(["/choose-address"]),this.alert.presentToast("Address Added Succuessfully"),this.dismiss()):(this.router.navigate(["/home"]),this.alert.presentToast("Address Added Succuessfully"),this.dismiss());case 3:case"end":return e.stop()}}),e,this)})))}),(function(e){return Object(r.a)(i,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.dismiss();case 2:if(400===e.status&&this.alert.presentToast("Invalid Details"),401===e.status&&this.alert.presentToast("Unauthorized"),t.t0=500===e.status,!t.t0){t.next=9;break}return t.next=8,n.dismiss();case 8:this.alert.presentToast("Invalid Details");case 9:case"end":return t.stop()}}),t,this)})))}));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"editTheAddress",value:function(e){this.showAddForm=!1,this.showEditForm=!0,this.addressId=e.addressId,this.title=e.title,this.address1=e.address1,this.address2=e.address2,this.addressTitle=e.addressTitle,this.mobile=e.mobile,this.city=e.city,this.country=e.country,this.pincode=e.pincode,this.state=e.state,this.latitude=e.latitude,this.longitude=e.longitude}},{key:"updateAddress",value:function(e){var t=this;e.lattitude=JSON.stringify(this.latitude),e.longitude=JSON.stringify(this.longitude),e.addressId=this.addressId,this.api.updateAddress(e).subscribe((function(e){t.alert.presentToast("Addres Updated Succuessfully"),t.dismiss()}),(function(e){500==e.status&&(t.alert.presentToast("Please Try again later "),t.dismiss())}))}},{key:"f",get:function(){return this.AddressForm.controls}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Lb(s.P),o.Lb(i.a),o.Lb(a.a),o.Lb(d.a),o.Lb(s.N),o.Lb(c.a),o.Lb(b.g),o.Lb(s.Q),o.Lb(l.a))},e.\u0275cmp=o.Fb({type:e,selectors:[["app-modal"]],viewQuery:function(e,t){var n;1&e&&o.vc(f,!0),2&e&&o.jc(n=o.ac())&&(t.mapElement=n.first)},decls:79,vars:20,consts:[["color","primary"],["slot","end","tab","search"],[2,"margin-left","6px","position","relative"],[2,"color","turquoise",3,"click"],[1,"background"],[2,"min-height","570px","background","#1f2238","box-shadow","1px 5px 14px 0px rgba(0, 1, 0, 0.8)"],[3,"formGroup"],["lines","none"],["position","fixed",2,"color","#fff"],["placeholder","Select","formControlName","title",2,"margin-left","40px","color","#fff",3,"ngModel","ngModelChange"],["value","OFFICE"],["value","HOME"],["value","OTHER"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],[1,"ion-float-right"],[2,"color","white"],["type","tel","formControlName","mobile","maxlength","10",3,"ngModel","keypress","ngModelChange"],["type","text","formControlName","address1",3,"ngModel","ngModelChange"],["type","text","formControlName","address2",3,"ngModel","ngModelChange"],["type","text","formControlName","city",3,"ngModel","ngModelChange"],["type","tel","maxLength","6","formControlName","pincode",3,"ngModel","keypress","ngModelChange"],["type","text","formControlName","state",3,"ngModel","ngModelChange"],["type","text","formControlName","country",3,"ngModel","ngModelChange"],[4,"ngIf"],["id","errorStyle",1,"invalid-feedback"],[2,"color","rgb(49, 192, 13)","margin-left","10px"],[1,"mapbutton","des-button",3,"disabled","click"],[1,"map-wrapper"],["id","map_center"],["src","../../assets/marker.png",2,"width","50px","background","transparent"],["id","map"],["map",""],["type","ngSubmit",1,"AddressSave",3,"click"]],template:function(e,t){1&e&&(o.Rb(0,"ion-header"),o.Rb(1,"ion-toolbar",0),o.Rb(2,"ion-title"),o.qc(3,"ADD/EDIT "),o.Qb(),o.Rb(4,"ion-buttons",1),o.Rb(5,"ion-button",2),o.Rb(6,"p",3),o.Zb("click",(function(){return t.dismiss()})),o.qc(7,"CLOSE"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(8,"ion-content",4),o.Rb(9,"ion-grid"),o.Rb(10,"ion-card",5),o.Rb(11,"form",6),o.Rb(12,"ion-row"),o.Rb(13,"ion-col"),o.Rb(14,"ion-item",7),o.Rb(15,"ion-label",8),o.qc(16," Address Type"),o.Qb(),o.Rb(17,"ion-select",9),o.Zb("ngModelChange",(function(e){return t.title=e})),o.Rb(18,"ion-select-option",10),o.qc(19,"OFFICE"),o.Qb(),o.Rb(20,"ion-select-option",11),o.qc(21,"HOME"),o.Qb(),o.Rb(22,"ion-select-option",12),o.qc(23,"OTHER"),o.Qb(),o.Qb(),o.Qb(),o.oc(24,p,2,1,"div",13),o.Qb(),o.Qb(),o.Rb(25,"ion-row"),o.Rb(26,"ion-col",14),o.Rb(27,"ion-item",7),o.Rb(28,"ion-label",8),o.qc(29," Mobile"),o.Qb(),o.Rb(30,"span",15),o.qc(31,"+91-"),o.Qb(),o.Rb(32,"ion-input",16),o.Zb("keypress",(function(e){return t.numberOnlyValidation(e)}))("ngModelChange",(function(e){return t.mobile=e})),o.Qb(),o.Qb(),o.oc(33,v,3,2,"div",13),o.Qb(),o.Qb(),o.Rb(34,"ion-row"),o.Rb(35,"ion-col"),o.Rb(36,"ion-item",7),o.Rb(37,"ion-label",8),o.qc(38," Address"),o.Qb(),o.Rb(39,"ion-input",17),o.Zb("ngModelChange",(function(e){return t.address1=e})),o.Qb(),o.Qb(),o.oc(40,A,2,1,"div",13),o.Qb(),o.Qb(),o.Rb(41,"ion-row"),o.Rb(42,"ion-col"),o.Rb(43,"ion-item",7),o.Rb(44,"ion-label",8),o.qc(45," Landmark"),o.Qb(),o.Rb(46,"ion-input",18),o.Zb("ngModelChange",(function(e){return t.address2=e})),o.Qb(),o.Qb(),o.oc(47,Q,2,1,"div",13),o.Qb(),o.Qb(),o.Rb(48,"ion-row"),o.Rb(49,"ion-col"),o.Rb(50,"ion-item",7),o.Rb(51,"ion-label",8),o.qc(52," City"),o.Qb(),o.Rb(53,"ion-input",19),o.Zb("ngModelChange",(function(e){return t.city=e})),o.Qb(),o.Qb(),o.oc(54,M,2,1,"div",13),o.Qb(),o.Qb(),o.Rb(55,"ion-row"),o.Rb(56,"ion-col"),o.Rb(57,"ion-item",7),o.Rb(58,"ion-label",8),o.qc(59," Pincode"),o.Qb(),o.Rb(60,"ion-input",20),o.Zb("keypress",(function(e){return t.numberOnlyValidation(e)}))("ngModelChange",(function(e){return t.pincode=e})),o.Qb(),o.Qb(),o.oc(61,q,3,2,"div",13),o.Qb(),o.Qb(),o.Rb(62,"ion-row"),o.Rb(63,"ion-col"),o.Rb(64,"ion-item",7),o.Rb(65,"ion-label",8),o.qc(66," State"),o.Qb(),o.Rb(67,"ion-input",21),o.Zb("ngModelChange",(function(e){return t.state=e})),o.Qb(),o.Qb(),o.oc(68,I,2,1,"div",13),o.Qb(),o.Qb(),o.Rb(69,"ion-row"),o.Rb(70,"ion-col"),o.Rb(71,"ion-item",7),o.Rb(72,"ion-label",8),o.qc(73," Country"),o.Qb(),o.Rb(74,"ion-input",22),o.Zb("ngModelChange",(function(e){return t.country=e})),o.Qb(),o.Qb(),o.oc(75,_,2,1,"div",13),o.Qb(),o.Qb(),o.oc(76,T,5,1,"ng-container",23),o.oc(77,P,6,0,"ng-container",23),o.oc(78,F,3,2,"ng-container",23),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&e&&(o.Ab(11),o.ec("formGroup",t.AddressForm),o.Ab(6),o.ec("ngModel",t.title),o.Ab(7),o.ec("ngIf",t.checkValid&&t.f.title.errors),o.Ab(8),o.ec("ngModel",t.mobile),o.Ab(1),o.ec("ngIf",t.checkValid&&t.f.mobile.errors),o.Ab(6),o.ec("ngModel",t.address1),o.Ab(1),o.ec("ngIf",t.checkValid&&t.f.address1.errors),o.Ab(6),o.ec("ngModel",t.address2),o.Ab(1),o.ec("ngIf",t.checkValid&&t.f.address2.errors),o.Ab(6),o.ec("ngModel",t.city),o.Ab(1),o.ec("ngIf",t.checkValid&&t.f.city.errors),o.Ab(6),o.ec("ngModel",t.pincode),o.Ab(1),o.ec("ngIf",t.checkValid&&t.f.pincode.errors),o.Ab(6),o.ec("ngModel",t.state),o.Ab(1),o.ec("ngIf",t.checkValid&&t.f.pincode.errors),o.Ab(6),o.ec("ngModel",t.country),o.Ab(1),o.ec("ngIf",t.checkValid&&t.f.country.errors),o.Ab(1),o.ec("ngIf",1==t.mapButton),o.Ab(1),o.ec("ngIf",t.showMap),o.Ab(1),o.ec("ngIf",0==t.mapButton))},directives:[s.o,s.K,s.J,s.f,s.e,s.j,s.n,s.g,i.m,i.i,i.c,s.B,s.i,s.r,s.s,s.D,s.T,i.h,i.b,s.E,u.k,s.q,s.U,i.e],styles:[".background[_ngcontent-%COMP%]{--background:#050714}.AddressSave[_ngcontent-%COMP%]{height:50px;font-size:18px}.AddressSave[_ngcontent-%COMP%], .mapbutton[_ngcontent-%COMP%]{color:#fff;background:#6b00c2;margin-top:10%;margin-left:10%;width:80%;text-align:center}.mapbutton[_ngcontent-%COMP%]{height:40px;font-size:14px}h1[_ngcontent-%COMP%]{margin-top:20px;font-size:18px;font-weight:700;text-align:center}#map_canvas[_ngcontent-%COMP%]{width:90%;height:80%;border:1px solid red}#address[_ngcontent-%COMP%]{padding:10px;font-size:18px;font-weight:700}#map[_ngcontent-%COMP%]{width:100%;height:50vh}.map-wrapper[_ngcontent-%COMP%]{position:relative}.map-wrapper[_ngcontent-%COMP%]   #map_center[_ngcontent-%COMP%]{position:absolute;z-index:99;height:40px;width:40px;top:50%;left:50%;margin-left:-21px;margin-top:-41px}ion-input[_ngcontent-%COMP%]{color:#fff}"]}),e}()}}]);