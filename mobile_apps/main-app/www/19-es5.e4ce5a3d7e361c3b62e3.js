function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{RdcS:function(t,e,r){"use strict";r.r(e),r.d(e,"ForgotpassordPageModule",(function(){return x}));var o=r("ofXK"),n=r("TEn/"),i=r("tk/3"),s=r("tyNb"),a=r("mrSG"),c=r("3Pt+"),l=r("fXoL"),b=r("XNvx"),u=r("Wdxn");function f(t,e){1&t&&l.Nb(0)}function d(t,e){1&t&&l.Nb(0)}function m(t,e){1&t&&(l.Rb(0,"div"),l.qc(1,"*Email is required"),l.Qb())}function p(t,e){1&t&&(l.Rb(0,"div"),l.qc(1,"Enter valid *email"),l.Qb())}function g(t,e){if(1&t&&(l.Rb(0,"div",14),l.oc(1,m,2,0,"div",15),l.oc(2,p,2,0,"div",15),l.Qb()),2&t){var r=l.bc(2);l.Ab(1),l.ec("ngIf",r.f.Email.errors.required),l.Ab(1),l.ec("ngIf",r.f.Email.errors.email)}}function h(t,e){if(1&t){var r=l.Sb();l.Rb(0,"ion-toolbar"),l.Rb(1,"ion-buttons",4),l.Mb(2,"ion-icon",5),l.Qb(),l.Qb(),l.Rb(3,"ion-grid"),l.Rb(4,"p",6),l.qc(5,"Forgot your password? "),l.Mb(6,"br"),l.qc(7," Let's recover it"),l.Qb(),l.Rb(8,"ion-card"),l.Rb(9,"form",7),l.Zb("ngSubmit",(function(){l.lc(r);var t=l.bc();return t.getEmail(t.EmailForm.value)})),l.Rb(10,"ion-row"),l.Rb(11,"ion-col",8),l.Rb(12,"div"),l.Rb(13,"ion-item",9),l.Rb(14,"ion-label",10),l.qc(15," Email "),l.Qb(),l.Mb(16,"ion-input",11),l.Qb(),l.oc(17,g,3,2,"div",12),l.Qb(),l.Qb(),l.Rb(18,"button",13),l.qc(19," Send OTP"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&t){var o=l.bc();l.Ab(9),l.ec("formGroup",o.EmailForm),l.Ab(8),l.ec("ngIf",o.checkValid&&o.f.Email.errors)}}function v(t,e){1&t&&(l.Rb(0,"div"),l.qc(1,"*Otp is required"),l.Qb())}function w(t,e){if(1&t&&(l.Rb(0,"div",14),l.oc(1,v,2,0,"div",15),l.Qb()),2&t){var r=l.bc(2);l.Ab(1),l.ec("ngIf",r.frmValid.otp.errors.required)}}function R(t,e){1&t&&(l.Rb(0,"div"),l.qc(1,"*Password is required"),l.Qb())}function k(t,e){if(1&t&&(l.Rb(0,"div",14),l.oc(1,R,2,0,"div",15),l.Qb()),2&t){var r=l.bc(2);l.Ab(1),l.ec("ngIf",r.frmValid.newPassword.errors.required)}}function Q(t,e){if(1&t){var r=l.Sb();l.Rb(0,"ion-toolbar"),l.Rb(1,"ion-buttons",16),l.Zb("click",(function(){return l.lc(r),l.bc().route()})),l.Mb(2,"ion-icon",17),l.Qb(),l.Qb(),l.Rb(3,"ion-grid"),l.Rb(4,"p",6),l.qc(5,"Forgot your password? "),l.Mb(6,"br"),l.qc(7," Let's recover it"),l.Qb(),l.Rb(8,"ion-card"),l.Rb(9,"form",7),l.Zb("ngSubmit",(function(){l.lc(r);var t=l.bc();return t.postOtp(t.OtpForm.value)})),l.Rb(10,"ion-row"),l.Rb(11,"ion-col",8),l.Rb(12,"div"),l.Rb(13,"ion-item",18),l.Rb(14,"ion-label",10),l.qc(15," OTP"),l.Qb(),l.Mb(16,"ion-input",19),l.Qb(),l.oc(17,w,2,1,"div",12),l.Rb(18,"ion-item",18),l.Rb(19,"ion-label",10),l.qc(20," New Password"),l.Qb(),l.Mb(21,"ion-input",20),l.Qb(),l.oc(22,k,2,1,"div",12),l.Qb(),l.Qb(),l.Rb(23,"button",13),l.qc(24," Update Password"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&t){var o=l.bc();l.Ab(9),l.ec("formGroup",o.OtpForm),l.Ab(8),l.ec("ngIf",o.otpFormValid&&o.frmValid.otp.errors),l.Ab(5),l.ec("ngIf",o.otpFormValid&&o.frmValid.newPassword.errors)}}var y,P,C,O=[{path:"",component:(y=function(){function t(e,r,o,n,i,s,a,c){_classCallCheck(this,t),this.fb=e,this.http=r,this.api=o,this.loadingController=n,this.alertController=i,this.router=s,this.alert=a,this.menu=c,this.checkValid=!1,this.otpFormValid=!1,this.otpPost=!1,this.forgotPassword=!0}return _createClass(t,[{key:"ngOnInit",value:function(){this.menu.swipeGesture(!1),this.EmailForm=this.fb.group({Email:["",[c.l.required,c.l.email]]}),this.OtpForm=this.fb.group({otp:["",[c.l.required]],newPassword:["",[c.l.required]]})}},{key:"route",value:function(){this.otpPost=!1,this.forgotPassword=!0}},{key:"getEmail",value:function(t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkValid=!0,!this.EmailForm.invalid){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.loadingController.create({message:"Please wait..."});case 4:(r=e.sent).present(),this.api.forgotPassword(t.Email).subscribe((function(e){localStorage.setItem("grocericaforgotEmail",t.Email),r.dismiss(),o.alert.presentToast("Otp Sent Successfully to your email"),o.forgotPassword=!1,o.otpPost=!0,o.otpFormValid=!1}),(function(t){r.dismiss(),"User not found"===t.error.message&&400===t.status&&o.alert.presentToast(t.error.message),500===t.status&&o.alert.presentToast("Something went wrong")}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"postOtp",value:function(t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.otpFormValid=!0,!this.OtpForm.invalid){e.next=2;break}return e.abrupt("return");case 2:return t.email=localStorage.getItem("grocericaforgotEmail"),e.next=5,this.loadingController.create({message:"Please wait..."});case 5:(r=e.sent).present(),this.api.postOtp(t).subscribe((function(t){r.dismiss(),o.presentAlertConfirm(t.message)}),(function(t){r.dismiss(),"User not found"===t.error.message&&400===t.status&&o.alert.presentToast(t.error.message),"OTP doesn't matched"===t.error.message&&500===t.status&&o.alert.presentToast(t.error.message)}));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlertConfirm",value:function(t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"my-custom-class",header:t,message:"Login to your Account",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(t){}},{text:"Okay",handler:function(){o.router.navigate(["login"])}}]});case 2:return r=e.sent,e.next=5,r.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"f",get:function(){return this.EmailForm.controls}},{key:"frmValid",get:function(){return this.OtpForm.controls}}]),t}(),y.\u0275fac=function(t){return new(t||y)(l.Lb(c.a),l.Lb(i.a),l.Lb(b.a),l.Lb(n.N),l.Lb(n.a),l.Lb(s.g),l.Lb(u.a),l.Lb(n.O))},y.\u0275cmp=l.Fb({type:y,selectors:[["app-forgotpassord"]],decls:7,vars:4,consts:[[1,"background",2,"background-color","rgb(6, 15, 66)"],[4,"ngIf","ngIfThen"],["forgotEmailForm",""],["otpEnterForm",""],["slot","start"],["name","arrow-back","routerLink","/login"],[1,"text"],[1,"ion-padding",3,"formGroup","ngSubmit"],[1,"ion-float-right"],["lines","none",2,"background-color","transparent"],["position","fixed",2,"color","#fff"],["type","text","formControlName","Email",2,"color","#fff","margin-left","-15px"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],["type","ngSubmit",1,"button-submit","des-button"],["id","errorStyle",1,"invalid-feedback"],[4,"ngIf"],["slot","start",3,"click"],["name","arrow-back"],["lines","none",1,"input-password"],["type","text","formControlName","otp",2,"color","#fff"],["type","password","formControlName","newPassword",2,"color","#fff"]],template:function(t,e){if(1&t&&(l.Rb(0,"ion-content",0),l.oc(1,f,1,0,"ng-container",1),l.oc(2,d,1,0,"ng-container",1),l.oc(3,h,20,2,"ng-template",null,2,l.pc),l.oc(5,Q,25,3,"ng-template",null,3,l.pc),l.Qb()),2&t){var r=l.kc(4),o=l.kc(6);l.Ab(1),l.ec("ngIf",e.forgotPassword)("ngIfThen",r),l.Ab(1),l.ec("ngIf",e.otpPost)("ngIfThen",o)}},directives:[n.j,o.k,n.K,n.f,n.p,n.S,s.h,n.n,n.g,c.m,c.i,c.c,n.B,n.i,n.r,n.s,n.q,n.U,c.h,c.b],styles:[".text[_ngcontent-%COMP%]{color:#fff;text-align:center;font-size:30px;margin-top:44%}.input-password[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{flex:0 0 130px}ion-input[_ngcontent-%COMP%]{color:#fff}"]}),y)}],q=((C=function t(){_classCallCheck(this,t)}).\u0275mod=l.Jb({type:C}),C.\u0275inj=l.Ib({factory:function(t){return new(t||C)},imports:[[s.i.forChild(O)],s.i]}),C),x=((P=function t(){_classCallCheck(this,t)}).\u0275mod=l.Jb({type:P}),P.\u0275inj=l.Ib({factory:function(t){return new(t||P)},providers:[b.a],imports:[[o.b,c.d,c.k,i.b,n.L,q]]}),P)}}]);