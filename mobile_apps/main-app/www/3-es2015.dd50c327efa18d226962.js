(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"Af+r":function(e,t,i){"use strict";i.d(t,"a",(function(){return N}));var o=i("mrSG"),n=i("3Pt+"),s=i("fXoL"),r=i("TEn/"),d=i("Bl/W"),c=i("Bfh1"),a=i("Wdxn"),b=i("tyNb"),l=i("h+qT"),u=i("ofXK");const g=["map"];function h(e,t){1&e&&(s.Rb(0,"div"),s.qc(1,"*title is required"),s.Qb())}function f(e,t){if(1&e&&(s.Rb(0,"div",24),s.oc(1,h,2,0,"div",23),s.Qb()),2&e){const e=s.bc();s.Ab(1),s.ec("ngIf",e.f.title.errors.required)}}function p(e,t){1&e&&(s.Rb(0,"div"),s.qc(1,"*Mobile no is required"),s.Qb())}function m(e,t){1&e&&(s.Rb(0,"div"),s.qc(1,"Enter valid *Mobile No"),s.Qb())}function v(e,t){if(1&e&&(s.Rb(0,"div",24),s.oc(1,p,2,0,"div",23),s.oc(2,m,2,0,"div",23),s.Qb()),2&e){const e=s.bc();s.Ab(1),s.ec("ngIf",e.f.mobile.errors.required),s.Ab(1),s.ec("ngIf",e.f.mobile.errors.pattern)}}function R(e,t){1&e&&(s.Rb(0,"div"),s.qc(1,"*Address is required"),s.Qb())}function Q(e,t){if(1&e&&(s.Rb(0,"div",24),s.oc(1,R,2,0,"div",23),s.Qb()),2&e){const e=s.bc();s.Ab(1),s.ec("ngIf",e.f.address1.errors.required)}}function A(e,t){1&e&&(s.Rb(0,"div"),s.qc(1,"*Landmark is required"),s.Qb())}function y(e,t){if(1&e&&(s.Rb(0,"div",24),s.oc(1,A,2,0,"div",23),s.Qb()),2&e){const e=s.bc();s.Ab(1),s.ec("ngIf",e.f.address2.errors.required)}}function M(e,t){1&e&&(s.Rb(0,"div"),s.qc(1,"*City is required"),s.Qb())}function C(e,t){if(1&e&&(s.Rb(0,"div",24),s.oc(1,M,2,0,"div",23),s.Qb()),2&e){const e=s.bc();s.Ab(1),s.ec("ngIf",e.f.city.errors.required)}}function q(e,t){1&e&&(s.Rb(0,"div"),s.qc(1,"*Pincode is required"),s.Qb())}function w(e,t){1&e&&(s.Rb(0,"div"),s.qc(1,"Enter valid *Pincode"),s.Qb())}function I(e,t){if(1&e&&(s.Rb(0,"div",24),s.oc(1,q,2,0,"div",23),s.oc(2,w,2,0,"div",23),s.Qb()),2&e){const e=s.bc();s.Ab(1),s.ec("ngIf",e.f.pincode.errors.required),s.Ab(1),s.ec("ngIf",e.f.pincode.errors.pattern)}}function O(e,t){1&e&&(s.Rb(0,"div"),s.qc(1,"*state is required"),s.Qb())}function x(e,t){if(1&e&&(s.Rb(0,"div",24),s.oc(1,O,2,0,"div",23),s.Qb()),2&e){const e=s.bc();s.Ab(1),s.ec("ngIf",e.f.state.errors.required)}}function k(e,t){1&e&&(s.Rb(0,"div"),s.qc(1,"*Country is required"),s.Qb())}function P(e,t){if(1&e&&(s.Rb(0,"div",24),s.oc(1,k,2,0,"div",23),s.Qb()),2&e){const e=s.bc();s.Ab(1),s.ec("ngIf",e.f.country.errors.required)}}function S(e,t){if(1&e){const e=s.Sb();s.Pb(0),s.Rb(1,"div",25),s.qc(2," Note: Its mandatory to choose your address from Map to register your address as it will help us to make your delivery experience better. "),s.Qb(),s.Rb(3,"ion-button",26),s.Zb("click",(function(){return s.lc(e),s.bc().loadMap()})),s.qc(4,"Add Address From Map"),s.Qb(),s.Ob()}if(2&e){const e=s.bc();s.Ab(3),s.ec("disabled",e.AddressForm.invalid)}}function F(e,t){1&e&&(s.Pb(0),s.Rb(1,"div",27),s.Rb(2,"div",28),s.Mb(3,"img",29),s.Qb(),s.Mb(4,"div",30,31),s.Qb(),s.Ob())}function T(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div"),s.Rb(1,"button",32),s.Zb("click",(function(){s.lc(e);const t=s.bc(2);return t.registerAddress(t.AddressForm.value)})),s.qc(2," Save Address "),s.Qb(),s.Qb()}}function L(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div"),s.Rb(1,"button",32),s.Zb("click",(function(){s.lc(e);const t=s.bc(2);return t.updateAddress(t.AddressForm.value)})),s.qc(2," Update Address "),s.Qb(),s.Qb()}}function E(e,t){if(1&e&&(s.Pb(0),s.oc(1,T,3,0,"div",23),s.oc(2,L,3,0,"div",23),s.Ob()),2&e){const e=s.bc();s.Ab(1),s.ec("ngIf",e.showAddForm),s.Ab(1),s.ec("ngIf",e.showEditForm)}}let N=(()=>{class e{constructor(e,t,i,o,n,s,r,d,c){this.viewCtrl=e,this.formBuilder=t,this.api=i,this.geolocation=o,this.loadingController=n,this.alert=s,this.router=r,this.nativeGeocoder=c,this.checkValid=!1,this.showAddForm=!0,this.mapButton=!0,this.showMap=!1,this.editAddress=d.get("item"),this.selecAddress=d.get("selector"),this.editAddress&&this.editTheAddress(this.editAddress)}ngOnInit(){this.AddressForm=this.formBuilder.group({title:["",[n.l.required]],address1:["",[n.l.required]],address2:[""],mobile:["",[n.l.pattern(/^[6-9]\d{9}$/),n.l.minLength(10),n.l.required]],city:["",[n.l.required]],country:["",[n.l.required]],pincode:["",[n.l.required,n.l.pattern(/^[1-9][0-9]{5}$/)]],state:["",[n.l.required]]})}get f(){return this.AddressForm.controls}dismiss(){this.viewCtrl.dismiss()}numberOnlyValidation(e){let t=String.fromCharCode(e.charCode);/[0-9.,]/.test(t)||e.preventDefault()}loadMap(){this.mapButton=!1,this.showMap=!0,this.geolocation.getCurrentPosition().then(e=>{this.latitude=e.coords.latitude,this.longitude=e.coords.longitude;const t={center:new google.maps.LatLng(e.coords.latitude,e.coords.longitude),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};this.getAddressFromCoords(e.coords.latitude,e.coords.longitude),this.map=new google.maps.Map(this.mapElement.nativeElement,t),this.map.addListener("dragend",()=>{this.latitude=this.map.center.lat(),this.longitude=this.map.center.lng(),this.getAddressFromCoords(this.map.center.lat(),this.map.center.lng())})}).catch(e=>{})}getAddressFromCoords(e,t){this.nativeGeocoder.reverseGeocode(e,t,{useLocale:!0,maxResults:2}).then(e=>{this.city=e[1].locality,this.country=e[1].countryName,this.pincode=e[1].postalCode,this.state=e[1].administrativeArea,this.address="";const t=[];for(const[i,o]of Object.entries(e[0]))o.length>0&&t.push(o);t.reverse();for(const i of t)this.address+=i+", ";this.address=this.address.slice(0,-2)}).catch(e=>{this.address="Address Not Available!"})}registerAddress(e){return Object(o.a)(this,void 0,void 0,(function*(){if(this.checkValid=!0,this.AddressForm.invalid)return;const t=yield this.loadingController.create({message:"Please wait..."});t.present(),e.lattitude=JSON.stringify(this.latitude),e.longitude=JSON.stringify(this.longitude),this.api.registerAddress(e).subscribe(e=>Object(o.a)(this,void 0,void 0,(function*(){yield t.dismiss(),"CHOOSE"==this.selecAddress?(this.router.navigate(["/choose-address"]),this.alert.presentToast("Address Added Succuessfully"),this.dismiss()):(this.router.navigate(["/home"]),this.alert.presentToast("Address Added Succuessfully"),this.dismiss())})),e=>Object(o.a)(this,void 0,void 0,(function*(){yield t.dismiss(),400===e.status&&this.alert.presentToast("Invalid Details"),401===e.status&&this.alert.presentToast("Unauthorized"),500===e.status&&(yield t.dismiss(),this.alert.presentToast("Invalid Details"))})))}))}editTheAddress(e){this.showAddForm=!1,this.showEditForm=!0,this.addressId=e.addressId,this.title=e.title,this.address1=e.address1,this.address2=e.address2,this.addressTitle=e.addressTitle,this.mobile=e.mobile,this.city=e.city,this.country=e.country,this.pincode=e.pincode,this.state=e.state,this.latitude=e.latitude,this.longitude=e.longitude}updateAddress(e){e.lattitude=JSON.stringify(this.latitude),e.longitude=JSON.stringify(this.longitude),e.addressId=this.addressId,this.api.updateAddress(e).subscribe(e=>{this.alert.presentToast("Addres Updated Succuessfully"),this.dismiss()},e=>{500==e.status&&(this.alert.presentToast("Please Try again later "),this.dismiss())})}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(r.P),s.Lb(n.a),s.Lb(d.a),s.Lb(c.a),s.Lb(r.N),s.Lb(a.a),s.Lb(b.g),s.Lb(r.Q),s.Lb(l.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-modal"]],viewQuery:function(e,t){var i;1&e&&s.vc(g,!0),2&e&&s.jc(i=s.ac())&&(t.mapElement=i.first)},decls:79,vars:20,consts:[["color","primary"],["slot","end","tab","search"],[2,"margin-left","6px","position","relative"],[2,"color","turquoise",3,"click"],[1,"background"],[2,"min-height","570px","background","#1f2238","box-shadow","1px 5px 14px 0px rgba(0, 1, 0, 0.8)"],[3,"formGroup"],["lines","none"],["position","fixed",2,"color","#fff"],["placeholder","Select","formControlName","title",2,"margin-left","40px","color","#fff",3,"ngModel","ngModelChange"],["value","OFFICE"],["value","HOME"],["value","OTHER"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],[1,"ion-float-right"],[2,"color","white"],["type","tel","formControlName","mobile","maxlength","10",3,"ngModel","keypress","ngModelChange"],["type","text","formControlName","address1",3,"ngModel","ngModelChange"],["type","text","formControlName","address2",3,"ngModel","ngModelChange"],["type","text","formControlName","city",3,"ngModel","ngModelChange"],["type","tel","maxLength","6","formControlName","pincode",3,"ngModel","keypress","ngModelChange"],["type","text","formControlName","state",3,"ngModel","ngModelChange"],["type","text","formControlName","country",3,"ngModel","ngModelChange"],[4,"ngIf"],["id","errorStyle",1,"invalid-feedback"],[2,"color","rgb(49, 192, 13)","margin-left","10px"],[1,"mapbutton","des-button",3,"disabled","click"],[1,"map-wrapper"],["id","map_center"],["src","../../assets/marker.png",2,"width","50px","background","transparent"],["id","map"],["map",""],["type","ngSubmit",1,"AddressSave",3,"click"]],template:function(e,t){1&e&&(s.Rb(0,"ion-header"),s.Rb(1,"ion-toolbar",0),s.Rb(2,"ion-title"),s.qc(3,"ADD/EDIT "),s.Qb(),s.Rb(4,"ion-buttons",1),s.Rb(5,"ion-button",2),s.Rb(6,"p",3),s.Zb("click",(function(){return t.dismiss()})),s.qc(7,"CLOSE"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(8,"ion-content",4),s.Rb(9,"ion-grid"),s.Rb(10,"ion-card",5),s.Rb(11,"form",6),s.Rb(12,"ion-row"),s.Rb(13,"ion-col"),s.Rb(14,"ion-item",7),s.Rb(15,"ion-label",8),s.qc(16," Address Type"),s.Qb(),s.Rb(17,"ion-select",9),s.Zb("ngModelChange",(function(e){return t.title=e})),s.Rb(18,"ion-select-option",10),s.qc(19,"OFFICE"),s.Qb(),s.Rb(20,"ion-select-option",11),s.qc(21,"HOME"),s.Qb(),s.Rb(22,"ion-select-option",12),s.qc(23,"OTHER"),s.Qb(),s.Qb(),s.Qb(),s.oc(24,f,2,1,"div",13),s.Qb(),s.Qb(),s.Rb(25,"ion-row"),s.Rb(26,"ion-col",14),s.Rb(27,"ion-item",7),s.Rb(28,"ion-label",8),s.qc(29," Mobile"),s.Qb(),s.Rb(30,"span",15),s.qc(31,"+91-"),s.Qb(),s.Rb(32,"ion-input",16),s.Zb("keypress",(function(e){return t.numberOnlyValidation(e)}))("ngModelChange",(function(e){return t.mobile=e})),s.Qb(),s.Qb(),s.oc(33,v,3,2,"div",13),s.Qb(),s.Qb(),s.Rb(34,"ion-row"),s.Rb(35,"ion-col"),s.Rb(36,"ion-item",7),s.Rb(37,"ion-label",8),s.qc(38," Address"),s.Qb(),s.Rb(39,"ion-input",17),s.Zb("ngModelChange",(function(e){return t.address1=e})),s.Qb(),s.Qb(),s.oc(40,Q,2,1,"div",13),s.Qb(),s.Qb(),s.Rb(41,"ion-row"),s.Rb(42,"ion-col"),s.Rb(43,"ion-item",7),s.Rb(44,"ion-label",8),s.qc(45," Landmark"),s.Qb(),s.Rb(46,"ion-input",18),s.Zb("ngModelChange",(function(e){return t.address2=e})),s.Qb(),s.Qb(),s.oc(47,y,2,1,"div",13),s.Qb(),s.Qb(),s.Rb(48,"ion-row"),s.Rb(49,"ion-col"),s.Rb(50,"ion-item",7),s.Rb(51,"ion-label",8),s.qc(52," City"),s.Qb(),s.Rb(53,"ion-input",19),s.Zb("ngModelChange",(function(e){return t.city=e})),s.Qb(),s.Qb(),s.oc(54,C,2,1,"div",13),s.Qb(),s.Qb(),s.Rb(55,"ion-row"),s.Rb(56,"ion-col"),s.Rb(57,"ion-item",7),s.Rb(58,"ion-label",8),s.qc(59," Pincode"),s.Qb(),s.Rb(60,"ion-input",20),s.Zb("keypress",(function(e){return t.numberOnlyValidation(e)}))("ngModelChange",(function(e){return t.pincode=e})),s.Qb(),s.Qb(),s.oc(61,I,3,2,"div",13),s.Qb(),s.Qb(),s.Rb(62,"ion-row"),s.Rb(63,"ion-col"),s.Rb(64,"ion-item",7),s.Rb(65,"ion-label",8),s.qc(66," State"),s.Qb(),s.Rb(67,"ion-input",21),s.Zb("ngModelChange",(function(e){return t.state=e})),s.Qb(),s.Qb(),s.oc(68,x,2,1,"div",13),s.Qb(),s.Qb(),s.Rb(69,"ion-row"),s.Rb(70,"ion-col"),s.Rb(71,"ion-item",7),s.Rb(72,"ion-label",8),s.qc(73," Country"),s.Qb(),s.Rb(74,"ion-input",22),s.Zb("ngModelChange",(function(e){return t.country=e})),s.Qb(),s.Qb(),s.oc(75,P,2,1,"div",13),s.Qb(),s.Qb(),s.oc(76,S,5,1,"ng-container",23),s.oc(77,F,6,0,"ng-container",23),s.oc(78,E,3,2,"ng-container",23),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.Ab(11),s.ec("formGroup",t.AddressForm),s.Ab(6),s.ec("ngModel",t.title),s.Ab(7),s.ec("ngIf",t.checkValid&&t.f.title.errors),s.Ab(8),s.ec("ngModel",t.mobile),s.Ab(1),s.ec("ngIf",t.checkValid&&t.f.mobile.errors),s.Ab(6),s.ec("ngModel",t.address1),s.Ab(1),s.ec("ngIf",t.checkValid&&t.f.address1.errors),s.Ab(6),s.ec("ngModel",t.address2),s.Ab(1),s.ec("ngIf",t.checkValid&&t.f.address2.errors),s.Ab(6),s.ec("ngModel",t.city),s.Ab(1),s.ec("ngIf",t.checkValid&&t.f.city.errors),s.Ab(6),s.ec("ngModel",t.pincode),s.Ab(1),s.ec("ngIf",t.checkValid&&t.f.pincode.errors),s.Ab(6),s.ec("ngModel",t.state),s.Ab(1),s.ec("ngIf",t.checkValid&&t.f.pincode.errors),s.Ab(6),s.ec("ngModel",t.country),s.Ab(1),s.ec("ngIf",t.checkValid&&t.f.country.errors),s.Ab(1),s.ec("ngIf",1==t.mapButton),s.Ab(1),s.ec("ngIf",t.showMap),s.Ab(1),s.ec("ngIf",0==t.mapButton))},directives:[r.o,r.K,r.J,r.f,r.e,r.j,r.n,r.g,n.m,n.i,n.c,r.B,r.i,r.r,r.s,r.D,r.T,n.h,n.b,r.E,u.k,r.q,r.U,n.e],styles:[".background[_ngcontent-%COMP%]{--background:#050714}.AddressSave[_ngcontent-%COMP%]{height:50px;font-size:18px}.AddressSave[_ngcontent-%COMP%], .mapbutton[_ngcontent-%COMP%]{color:#fff;background:#6b00c2;margin-top:10%;margin-left:10%;width:80%;text-align:center}.mapbutton[_ngcontent-%COMP%]{height:40px;font-size:14px}h1[_ngcontent-%COMP%]{margin-top:20px;font-size:18px;font-weight:700;text-align:center}#map_canvas[_ngcontent-%COMP%]{width:90%;height:80%;border:1px solid red}#address[_ngcontent-%COMP%]{padding:10px;font-size:18px;font-weight:700}#map[_ngcontent-%COMP%]{width:100%;height:50vh}.map-wrapper[_ngcontent-%COMP%]{position:relative}.map-wrapper[_ngcontent-%COMP%]   #map_center[_ngcontent-%COMP%]{position:absolute;z-index:99;height:40px;width:40px;top:50%;left:50%;margin-left:-21px;margin-top:-41px}ion-input[_ngcontent-%COMP%]{color:#fff}"]}),e})()}}]);