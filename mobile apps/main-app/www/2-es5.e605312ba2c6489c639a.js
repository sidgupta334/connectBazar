function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(d){o=!0,i=d}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"Af+r":function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var r=n("mrSG"),o=n("3Pt+"),i=n("fXoL"),s=n("TEn/"),c=n("Bl/W"),d=n("Bfh1"),a=n("Wdxn"),l=n("tyNb"),b=n("h+qT"),u=n("ofXK"),f=["map"];function g(e,t){1&e&&(i.Pb(0,"div"),i.nc(1,"*title is required"),i.Ob())}function p(e,t){if(1&e&&(i.Pb(0,"div",23),i.lc(1,g,2,0,"div",22),i.Ob()),2&e){var n=i.Zb();i.zb(1),i.cc("ngIf",n.f.title.errors.required)}}function h(e,t){1&e&&(i.Pb(0,"div"),i.nc(1,"*Mobile no is required"),i.Ob())}function m(e,t){1&e&&(i.Pb(0,"div"),i.nc(1,"Enter valid *Mobile No"),i.Ob())}function v(e,t){if(1&e&&(i.Pb(0,"div",23),i.lc(1,h,2,0,"div",22),i.lc(2,m,2,0,"div",22),i.Ob()),2&e){var n=i.Zb();i.zb(1),i.cc("ngIf",n.f.mobile.errors.required),i.zb(1),i.cc("ngIf",n.f.mobile.errors.pattern)}}function O(e,t){1&e&&(i.Pb(0,"div"),i.nc(1,"*Address is required"),i.Ob())}function P(e,t){if(1&e&&(i.Pb(0,"div",23),i.lc(1,O,2,0,"div",22),i.Ob()),2&e){var n=i.Zb();i.zb(1),i.cc("ngIf",n.f.address1.errors.required)}}function y(e,t){1&e&&(i.Pb(0,"div"),i.nc(1,"*Landmark is required"),i.Ob())}function A(e,t){if(1&e&&(i.Pb(0,"div",23),i.lc(1,y,2,0,"div",22),i.Ob()),2&e){var n=i.Zb();i.zb(1),i.cc("ngIf",n.f.address2.errors.required)}}function C(e,t){1&e&&(i.Pb(0,"div"),i.nc(1,"*City is required"),i.Ob())}function M(e,t){if(1&e&&(i.Pb(0,"div",23),i.lc(1,C,2,0,"div",22),i.Ob()),2&e){var n=i.Zb();i.zb(1),i.cc("ngIf",n.f.city.errors.required)}}function w(e,t){1&e&&(i.Pb(0,"div"),i.nc(1,"*Pincode is required"),i.Ob())}function k(e,t){1&e&&(i.Pb(0,"div"),i.nc(1,"Enter valid *Pincode"),i.Ob())}function x(e,t){if(1&e&&(i.Pb(0,"div",23),i.lc(1,w,2,0,"div",22),i.lc(2,k,2,0,"div",22),i.Ob()),2&e){var n=i.Zb();i.zb(1),i.cc("ngIf",n.f.pincode.errors.required),i.zb(1),i.cc("ngIf",n.f.pincode.errors.pattern)}}function I(e,t){1&e&&(i.Pb(0,"div"),i.nc(1,"*state is required"),i.Ob())}function z(e,t){if(1&e&&(i.Pb(0,"div",23),i.lc(1,I,2,0,"div",22),i.Ob()),2&e){var n=i.Zb();i.zb(1),i.cc("ngIf",n.f.state.errors.required)}}function _(e,t){1&e&&(i.Pb(0,"div"),i.nc(1,"*Country is required"),i.Ob())}function T(e,t){if(1&e&&(i.Pb(0,"div",23),i.lc(1,_,2,0,"div",22),i.Ob()),2&e){var n=i.Zb();i.zb(1),i.cc("ngIf",n.f.country.errors.required)}}function q(e,t){if(1&e){var n=i.Qb();i.Nb(0),i.Pb(1,"ion-button",24),i.Xb("click",(function(){return i.ic(n),i.Zb().loadMap()})),i.nc(2,"Add Address From Map"),i.Ob(),i.Mb()}}function S(e,t){1&e&&(i.Nb(0),i.Pb(1,"div",25),i.Pb(2,"div",26),i.Kb(3,"img",27),i.Ob(),i.Kb(4,"div",28,29),i.Ob(),i.Mb())}function E(e,t){if(1&e){var n=i.Qb();i.Pb(0,"div"),i.Pb(1,"button",30),i.Xb("click",(function(){i.ic(n);var e=i.Zb(2);return e.registerAddress(e.AddressForm.value)})),i.nc(2," Save Address "),i.Ob(),i.Ob()}}function F(e,t){if(1&e){var n=i.Qb();i.Pb(0,"div"),i.Pb(1,"button",30),i.Xb("click",(function(){i.ic(n);var e=i.Zb(2);return e.updateAddress(e.AddressForm.value)})),i.nc(2," Update Address "),i.Ob(),i.Ob()}}function N(e,t){if(1&e&&(i.Nb(0),i.lc(1,E,3,0,"div",22),i.lc(2,F,3,0,"div",22),i.Mb()),2&e){var n=i.Zb();i.zb(1),i.cc("ngIf",n.showAddForm),i.zb(1),i.cc("ngIf",n.showEditForm)}}var J=function(){var e=function(){function e(t,n,r,o,i,s,c,d,a){_classCallCheck(this,e),this.viewCtrl=t,this.formBuilder=n,this.api=r,this.geolocation=o,this.loadingController=i,this.alert=s,this.router=c,this.nativeGeocoder=a,this.checkValid=!1,this.showAddForm=!0,this.mapButton=!0,this.showMap=!1,this.editAddress=d.get("item"),this.selecAddress=d.get("selector"),this.editAddress&&this.editTheAddress(this.editAddress),console.log(this.editAddress)}return _createClass(e,[{key:"ngOnInit",value:function(){this.AddressForm=this.formBuilder.group({title:["",[o.l.required]],address1:["",[o.l.required]],address2:["",[o.l.required]],mobile:["",[o.l.pattern(/^[6-9]\d{9}$/)]],city:["",[o.l.required]],country:["",[o.l.required]],pincode:["",[o.l.required,o.l.pattern(/^[1-9][0-9]{5}$/)]],state:["",[o.l.required]]})}},{key:"dismiss",value:function(){this.viewCtrl.dismiss()}},{key:"loadMap",value:function(){var e=this;this.mapButton=!1,this.showMap=!0,this.geolocation.getCurrentPosition().then((function(t){e.latitude=t.coords.latitude,e.longitude=t.coords.longitude,console.log("loap map response by getcurrent position ",t);var n={center:new google.maps.LatLng(t.coords.latitude,t.coords.longitude),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};e.getAddressFromCoords(t.coords.latitude,t.coords.longitude),e.map=new google.maps.Map(e.mapElement.nativeElement,n),e.map.addListener("dragend",(function(){e.latitude=e.map.center.lat(),e.longitude=e.map.center.lng(),e.getAddressFromCoords(e.map.center.lat(),e.map.center.lng())}))})).catch((function(e){console.log("Error getting location",e)}))}},{key:"getAddressFromCoords",value:function(e,t){var n=this;console.log("getAddressFromCoords "+e+" "+t),console.log("Procedding to reverse geo coder"),this.nativeGeocoder.reverseGeocode(e,t,{useLocale:!0,maxResults:2}).then((function(e){console.log("Inside geo coder"),console.log("result ",e),n.city=e[1].locality,n.country=e[1].countryName,n.pincode=e[1].postalCode,n.state=e[1].administrativeArea,n.address="";for(var t=[],r=0,o=Object.entries(e[0]);r<o.length;r++){var i=_slicedToArray(o[r],2),s=(i[0],i[1]);console.log("valueeee",s),s.length>0&&t.push(s)}t.reverse();for(var c=0,d=t;c<d.length;c++){var a=d[c];n.address+=a+", ",console.log("response address reverse ",n.address)}n.address=n.address.slice(0,-2)})).catch((function(e){n.address="Address Not Available!"}))}},{key:"registerAddress",value:function(e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkValid=!0,!this.AddressForm.invalid){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.loadingController.create({message:"Please wait..."});case 4:(n=t.sent).present(),e.lattitude=JSON.stringify(this.latitude),e.longitude=JSON.stringify(this.longitude),this.api.registerAddress(e).subscribe((function(e){return Object(r.a)(o,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,n.dismiss();case 3:console.log("select address"+this.selecAddress),"CHOOSE"==this.selecAddress?(console.log("hello"),this.router.navigate(["/choose-address"]),this.alert.presentToast("Address Added Succuessfully"),this.dismiss()):(this.router.navigate(["/home"]),this.alert.presentToast("Address Added Succuessfully"),this.dismiss());case 5:case"end":return t.stop()}}),t,this)})))}),(function(e){return Object(r.a)(o,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,n.dismiss();case 3:if(console.log(e),400===e.status&&this.alert.presentToast("Invalid Details"),401===e.status&&this.alert.presentToast("Unauthorized"),t.t0=500===e.status,!t.t0){t.next=11;break}return t.next=10,n.dismiss();case 10:this.alert.presentToast("Invalid Details");case 11:case"end":return t.stop()}}),t,this)})))}));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"editTheAddress",value:function(e){console.log(e),this.showAddForm=!1,this.showEditForm=!0,this.addressId=e.addressId,this.title=e.title,this.address1=e.address1,this.address2=e.address2,this.addressTitle=e.addressTitle,this.mobile=e.mobile,this.city=e.city,this.country=e.country,this.pincode=e.pincode,this.state=e.state,this.latitude=e.latitude,this.longitude=e.longitude}},{key:"updateAddress",value:function(e){var t=this;e.lattitude=JSON.stringify(this.latitude),e.longitude=JSON.stringify(this.longitude),e.addressId=this.addressId,console.log(e),this.api.updateAddress(e).subscribe((function(e){console.log(e),t.alert.presentToast("Addres Updated Succuessfully"),t.dismiss()}),(function(e){console.log(e),500==e.status&&(t.alert.presentToast("Please Try again later "),t.dismiss())}))}},{key:"f",get:function(){return this.AddressForm.controls}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Jb(s.P),i.Jb(o.a),i.Jb(c.a),i.Jb(d.a),i.Jb(s.N),i.Jb(a.a),i.Jb(l.g),i.Jb(s.Q),i.Jb(b.a))},e.\u0275cmp=i.Db({type:e,selectors:[["app-modal"]],viewQuery:function(e,t){var n;1&e&&i.rc(f,!0),2&e&&i.gc(n=i.Yb())&&(t.mapElement=n.first)},decls:77,vars:20,consts:[["color","primary"],["slot","end","tab","search"],[2,"margin-left","6px","position","relative"],[2,"color","turquoise",3,"click"],[1,"background"],[2,"min-height","570px","background","#1f2238","box-shadow","1px 5px 14px 0px rgba(0, 1, 0, 0.8)"],[3,"formGroup"],["lines","none"],["position","fixed",2,"color","#fff"],["placeholder","Select","formControlName","title",2,"margin-left","40px","color","#fff",3,"ngModel","ngModelChange"],["value","OFFICE"],["value","HOME"],["value","OTHER"],["id","errorStyle","class","invalid-feedback",4,"ngIf"],[1,"ion-float-right"],["type","tel","formControlName","mobile","maxlength","10",3,"ngModel","ngModelChange"],["type","text","formControlName","address1",3,"ngModel","ngModelChange"],["type","text","formControlName","address2",3,"ngModel","ngModelChange"],["type","text","formControlName","city",3,"ngModel","ngModelChange"],["type","text","formControlName","pincode",3,"ngModel","ngModelChange"],["type","text","formControlName","state",3,"ngModel","ngModelChange"],["type","text","formControlName","country",3,"ngModel","ngModelChange"],[4,"ngIf"],["id","errorStyle",1,"invalid-feedback"],[1,"mapbutton","des-button",3,"click"],[1,"map-wrapper"],["id","map_center"],["src","../../assets/marker.png",2,"width","50px","background","transparent"],["id","map"],["map",""],["type","ngSubmit",1,"AddressSave",3,"click"]],template:function(e,t){1&e&&(i.Pb(0,"ion-header"),i.Pb(1,"ion-toolbar",0),i.Pb(2,"ion-title"),i.nc(3,"ADD/EDIT "),i.Ob(),i.Pb(4,"ion-buttons",1),i.Pb(5,"ion-button",2),i.Pb(6,"p",3),i.Xb("click",(function(){return t.dismiss()})),i.nc(7,"CLOSE"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Pb(8,"ion-content",4),i.Pb(9,"ion-grid"),i.Pb(10,"ion-card",5),i.Pb(11,"form",6),i.Pb(12,"ion-row"),i.Pb(13,"ion-col"),i.Pb(14,"ion-item",7),i.Pb(15,"ion-label",8),i.nc(16," Address Type"),i.Ob(),i.Pb(17,"ion-select",9),i.Xb("ngModelChange",(function(e){return t.title=e})),i.Pb(18,"ion-select-option",10),i.nc(19,"OFFICE"),i.Ob(),i.Pb(20,"ion-select-option",11),i.nc(21,"HOME"),i.Ob(),i.Pb(22,"ion-select-option",12),i.nc(23,"OTHER"),i.Ob(),i.Ob(),i.Ob(),i.lc(24,p,2,1,"div",13),i.Ob(),i.Ob(),i.Pb(25,"ion-row"),i.Pb(26,"ion-col",14),i.Pb(27,"ion-item",7),i.Pb(28,"ion-label",8),i.nc(29," Mobile"),i.Ob(),i.Pb(30,"ion-input",15),i.Xb("ngModelChange",(function(e){return t.mobile=e})),i.Ob(),i.Ob(),i.lc(31,v,3,2,"div",13),i.Ob(),i.Ob(),i.Pb(32,"ion-row"),i.Pb(33,"ion-col"),i.Pb(34,"ion-item",7),i.Pb(35,"ion-label",8),i.nc(36," Address"),i.Ob(),i.Pb(37,"ion-input",16),i.Xb("ngModelChange",(function(e){return t.address1=e})),i.Ob(),i.Ob(),i.lc(38,P,2,1,"div",13),i.Ob(),i.Ob(),i.Pb(39,"ion-row"),i.Pb(40,"ion-col"),i.Pb(41,"ion-item",7),i.Pb(42,"ion-label",8),i.nc(43," Landmark"),i.Ob(),i.Pb(44,"ion-input",17),i.Xb("ngModelChange",(function(e){return t.address2=e})),i.Ob(),i.Ob(),i.lc(45,A,2,1,"div",13),i.Ob(),i.Ob(),i.Pb(46,"ion-row"),i.Pb(47,"ion-col"),i.Pb(48,"ion-item",7),i.Pb(49,"ion-label",8),i.nc(50," City"),i.Ob(),i.Pb(51,"ion-input",18),i.Xb("ngModelChange",(function(e){return t.city=e})),i.Ob(),i.Ob(),i.lc(52,M,2,1,"div",13),i.Ob(),i.Ob(),i.Pb(53,"ion-row"),i.Pb(54,"ion-col"),i.Pb(55,"ion-item",7),i.Pb(56,"ion-label",8),i.nc(57," Pincode"),i.Ob(),i.Pb(58,"ion-input",19),i.Xb("ngModelChange",(function(e){return t.pincode=e})),i.Ob(),i.Ob(),i.lc(59,x,3,2,"div",13),i.Ob(),i.Ob(),i.Pb(60,"ion-row"),i.Pb(61,"ion-col"),i.Pb(62,"ion-item",7),i.Pb(63,"ion-label",8),i.nc(64," State"),i.Ob(),i.Pb(65,"ion-input",20),i.Xb("ngModelChange",(function(e){return t.state=e})),i.Ob(),i.Ob(),i.lc(66,z,2,1,"div",13),i.Ob(),i.Ob(),i.Pb(67,"ion-row"),i.Pb(68,"ion-col"),i.Pb(69,"ion-item",7),i.Pb(70,"ion-label",8),i.nc(71," Country"),i.Ob(),i.Pb(72,"ion-input",21),i.Xb("ngModelChange",(function(e){return t.country=e})),i.Ob(),i.Ob(),i.lc(73,T,2,1,"div",13),i.Ob(),i.Ob(),i.lc(74,q,3,0,"ng-container",22),i.lc(75,S,6,0,"ng-container",22),i.lc(76,N,3,2,"ng-container",22),i.Ob(),i.Ob(),i.Ob(),i.Ob()),2&e&&(i.zb(11),i.cc("formGroup",t.AddressForm),i.zb(6),i.cc("ngModel",t.title),i.zb(7),i.cc("ngIf",t.checkValid&&t.f.title.errors),i.zb(6),i.cc("ngModel",t.mobile),i.zb(1),i.cc("ngIf",t.checkValid&&t.f.mobile.errors),i.zb(6),i.cc("ngModel",t.address1),i.zb(1),i.cc("ngIf",t.checkValid&&t.f.address1.errors),i.zb(6),i.cc("ngModel",t.address2),i.zb(1),i.cc("ngIf",t.checkValid&&t.f.address2.errors),i.zb(6),i.cc("ngModel",t.city),i.zb(1),i.cc("ngIf",t.checkValid&&t.f.city.errors),i.zb(6),i.cc("ngModel",t.pincode),i.zb(1),i.cc("ngIf",t.checkValid&&t.f.pincode.errors),i.zb(6),i.cc("ngModel",t.state),i.zb(1),i.cc("ngIf",t.checkValid&&t.f.pincode.errors),i.zb(6),i.cc("ngModel",t.country),i.zb(1),i.cc("ngIf",t.checkValid&&t.f.country.errors),i.zb(1),i.cc("ngIf",1==t.mapButton),i.zb(1),i.cc("ngIf",t.showMap),i.zb(1),i.cc("ngIf",0==t.mapButton))},directives:[s.o,s.K,s.J,s.f,s.e,s.j,s.n,s.g,o.m,o.i,o.c,s.B,s.i,s.r,s.s,s.D,s.T,o.h,o.b,s.E,u.k,s.q,s.U,o.e],styles:[".background[_ngcontent-%COMP%]{--background:#050714}.AddressSave[_ngcontent-%COMP%]{height:50px;font-size:18px}.AddressSave[_ngcontent-%COMP%], .mapbutton[_ngcontent-%COMP%]{color:#fff;background:#6b00c2;margin-top:10%;margin-left:10%;width:80%;text-align:center}.mapbutton[_ngcontent-%COMP%]{height:40px;font-size:14px}h1[_ngcontent-%COMP%]{margin-top:20px;font-size:18px;font-weight:700;text-align:center}#map_canvas[_ngcontent-%COMP%]{width:90%;height:80%;border:1px solid red}#address[_ngcontent-%COMP%]{padding:10px;font-size:18px;font-weight:700}#map[_ngcontent-%COMP%]{width:100%;height:50vh}.map-wrapper[_ngcontent-%COMP%]{position:relative}.map-wrapper[_ngcontent-%COMP%]   #map_center[_ngcontent-%COMP%]{position:absolute;z-index:99;height:40px;width:40px;top:50%;left:50%;margin-left:-21px;margin-top:-41px}ion-input[_ngcontent-%COMP%]{color:#fff}"]}),e}()}}]);